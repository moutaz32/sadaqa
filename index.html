<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù„Ù‰ Ø±ÙˆØ­ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ. Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„Ø®ØªÙ…Ø©.">
    <meta name="theme-color" content="#059669">
    
    <meta property="og:title" content="ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© | Ù…. Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ">
    <meta property="og:description" content="Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡. Ø´Ø§Ø±ÙƒÙ†Ø§ ÙÙŠ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø¯Ø¹Ø§Ø¡.">
    <meta property="og:image" content="https://img.icons8.com/color/480/quran.png"> <meta property="og:url" content="https://sadaqa-640e8.web.app">
    
    <title>Ù†ÙˆØ± | Ù…. Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root { --primary: #059669; --dark: #0f172a; --light: #f8fafc; --accent: #fbbf24; --glass: rgba(255, 255, 255, 0.95); --shadow: 0 4px 20px rgba(0,0,0,0.08); }
        [data-theme="dark"] { --primary: #34d399; --dark: #020617; --light: #111827; --glass: rgba(30, 41, 59, 0.98); color: #fff; }
        
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Tajawal', sans-serif; background: var(--light); color: #333; transition: 0.3s; padding-bottom: 120px; background-image: radial-gradient(var(--primary) 0.5px, transparent 0.5px); background-size: 20px 20px; overflow-x: hidden; }
        [data-theme="dark"] body { color: #fff; }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© (Ø¬Ø¯ÙŠØ¯ 10/10) */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }
        
        header { background: linear-gradient(160deg, #064e3b, #065f46); color: white; padding: 50px 20px 80px; text-align: center; border-radius: 0 0 50px 50px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .theme-btn { position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; backdrop-filter: blur(5px); }
        .deceased-name { font-size: 2rem; font-weight: 900; color: #fbbf24; text-shadow: 0 2px 10px rgba(0,0,0,0.3); line-height: 1.3; margin: 10px 0; }
        
        .container { max-width: 600px; margin: -50px auto 0; padding: 0 15px; position: relative; z-index: 10; }
        .card { background: var(--glass); border-radius: 20px; padding: 20px; margin-bottom: 15px; box-shadow: var(--shadow); border-top: 4px solid var(--primary); backdrop-filter: blur(10px); }
        [data-theme="dark"] .card { background: #1e293b; color: white; border: none; border-top: 4px solid var(--primary); }
        .card h2 { font-size: 1.2rem; margin-bottom: 15px; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .special-card { border-top: 4px solid var(--accent) !important; box-shadow: 0 10px 25px rgba(251, 191, 36, 0.15); text-align: center; }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .action-btn { background: rgba(0,0,0,0.03); padding: 15px; border-radius: 12px; text-align: center; cursor: pointer; font-weight: bold; color: inherit; display: flex; flex-direction: column; align-items: center; gap: 5px; font-size: 0.95rem; border: none; transition: 0.2s; text-decoration: none;}
        [data-theme="dark"] .action-btn { background: rgba(255,255,255,0.05); color: white; }
        .action-btn i { font-size: 1.5rem; color: var(--primary); }
        .action-btn:active { transform: scale(0.95); }
        
        .gift-btn { width: 100%; padding: 15px; background: var(--accent); color: #1e293b; border: none; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: center; gap: 10px; transition: 0.2s; margin-bottom:15px; }
        .gift-btn:active { transform: scale(0.95); }

        .juz-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); gap: 8px; margin-bottom: 15px; }
        .juz-btn { background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; padding: 10px 0; text-align: center; font-weight: bold; cursor: pointer; transition: 0.2s; }
        [data-theme="dark"] .juz-btn { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); }
        .juz-btn.read { background: var(--primary); color: white; border-color: var(--primary); cursor: not-allowed; opacity: 0.8;}
        
        .quran-select { width: 100%; padding: 12px; font-size: 1rem; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1); background: var(--light); color: inherit; font-family: 'Tajawal'; margin-bottom: 10px; font-weight: bold; }
        [data-theme="dark"] .quran-select { background: #0f172a; color: white; border-color: rgba(255,255,255,0.1); }
        .audio-player-box { background: rgba(5, 150, 105, 0.1); padding: 15px; border-radius: 15px; text-align: center; margin-top: 10px; border: 1px dashed var(--primary); }
        [data-theme="dark"] .audio-player-box { background: rgba(52, 211, 153, 0.05); }
        audio { width: 100%; height: 40px; margin-top: 10px; outline: none; }

        .sebha-circle { width: 130px; height: 130px; background: var(--light); border-radius: 50%; margin: 10px auto; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 4px solid var(--primary); cursor: pointer; user-select: none; box-shadow: 0 10px 20px rgba(0,0,0,0.1); transition: transform 0.1s; }
        .sebha-circle:active { transform: scale(0.95); }
        [data-theme="dark"] .sebha-circle { background: rgba(255,255,255,0.05); }
        .counter { font-size: 3rem; font-weight: 800; color: var(--primary); }

        .dua-input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #ccc; margin-bottom: 10px; font-family: inherit; resize: none; }
        [data-theme="dark"] .dua-input { background: #0f172a; color: white; border-color: #334155; }
        .dua-list { max-height: 250px; overflow-y: auto; text-align: right; padding-right: 5px; }
        .dua-item { background: rgba(0,0,0,0.02); padding: 12px; border-radius: 8px; margin-bottom: 8px; border-right: 3px solid var(--accent); font-size: 0.95rem; line-height: 1.5; }
        [data-theme="dark"] .dua-item { background: rgba(255,255,255,0.05); }

        .share-card { background: #1e293b; color: white; padding: 25px; border-radius: 15px; text-align: center; border: 2px solid var(--accent); margin-bottom: 15px; }
        .media-box { width: 100%; border-radius: 15px; margin-bottom: 15px; }

        /* Floating Player */
        .floating-player { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--glass); backdrop-filter: blur(15px); padding: 12px 20px; border-top: 1px solid rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between; z-index: 100; box-shadow: 0 -5px 25px rgba(0,0,0,0.15); transition: 0.3s; flex-wrap: wrap; gap: 10px; }
        [data-theme="dark"] .floating-player { background: rgba(30, 41, 59, 0.95); border-color: rgba(255,255,255,0.05); }
        .player-info { display: flex; align-items: center; gap: 10px; }
        .live-indicator { width: 10px; height: 10px; background: #ef4444; border-radius: 50%; box-shadow: 0 0 8px #ef4444; animation: pulseRed 1.5s infinite; }
        @keyframes pulseRed { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        .player-title { font-weight: bold; color: var(--primary); font-size: 1rem; }
        
        .player-controls { display: flex; align-items: center; gap: 15px; margin-right: auto; }
        .volume-control { display: flex; align-items: center; gap: 8px; color: var(--primary); }
        .volume-control i { cursor: pointer; font-size: 1.1rem; width: 20px; text-align: center; }
        #volumeSlider { -webkit-appearance: none; width: 80px; height: 6px; background: rgba(0,0,0,0.1); border-radius: 5px; outline: none; transition: 0.2s; direction: ltr;}
        [data-theme="dark"] #volumeSlider { background: rgba(255,255,255,0.1); }
        #volumeSlider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 14px; height: 14px; border-radius: 50%; background: var(--primary); cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,0.2); }
        
        .play-toggle { width: 45px; height: 45px; background: linear-gradient(135deg, var(--primary), #064e3b); color: white; border-radius: 50%; border: none; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(5, 150, 105, 0.3); transition: 0.2s; }
        .play-toggle:active { transform: scale(0.9); }

        @media (max-width: 400px) { #volumeSlider { width: 60px; } .player-title { font-size: 0.85rem; } }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; padding: 10px; overflow-y: auto; justify-content: center; align-items: flex-start; }
        .modal.active { display: flex; }
        .modal-content { background: #fff; width: 100%; max-width: 600px; border-radius: 20px; padding: 20px; margin-top: 20px; position: relative; min-height: 50vh; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        [data-theme="dark"] .modal-content { background: #1e293b; color: white; }
        .close-modal { position: sticky; top: 0; left: 0; background: #ef4444; color: white; width: 35px; height: 35px; border-radius: 50%; display: grid; place-items: center; cursor: pointer; float: left; margin-bottom: 10px; z-index: 5; font-weight: bold;}
        
        .toast-notification { position: fixed; bottom: 95px; left: 50%; transform: translateX(-50%) translateY(200%); background: #0f172a; color: white; padding: 15px 20px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); border: 2px solid var(--accent); display: flex; align-items: center; gap: 15px; z-index: 1000; transition: 0.5s; width: 90%; max-width: 400px; }
        .toast-notification.show { transform: translateX(-50%) translateY(0); }
        .daily-modal-content { background: linear-gradient(135deg, #064e3b, #0f172a); color: white; text-align: center; border: 4px solid var(--accent); border-radius: 25px; padding: 30px 20px; }
        
        .progress-bar-container { background: rgba(239, 68, 68, 0.1); border-radius: 12px; padding: 12px; margin-bottom: 20px; }
        .progress-text-row { display: flex; justify-content: space-between; font-size: 0.85rem; font-weight: bold; color: #ef4444; margin-bottom: 8px; }
        .progress-track { width: 100%; background: rgba(239, 68, 68, 0.2); height: 8px; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: #ef4444; transition: width 0.5s ease-out; width: 0%; }
        [data-theme="dark"] .progress-bar-container { background: rgba(239, 68, 68, 0.05); }
    </style>
</head>
<body>

    <header>
        <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
        <div style="opacity: 0.9;">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù„Ù‰ Ø±ÙˆØ­ Ø§Ù„Ù…ØºÙÙˆØ± Ù„Ù‡ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡</div>
        <div class="deceased-name">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬<br>Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ</div>
        <p style="font-size:0.9rem; opacity:0.9;">Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©</p>
        <div style="margin-top: 15px; font-size: 0.85rem; background: rgba(0,0,0,0.2); display: inline-block; padding: 5px 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);">
            <i class="fas fa-users" style="color: var(--accent); margin-left: 5px;"></i> Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±: <span id="visitorsCount" style="font-weight: bold; font-size: 1rem;">...</span>
        </div>
    </header>


    <div class="container">

        <div class="card reveal" style="text-align: center;">
            <h2><i class="fas fa-dove" style="color:var(--accent)"></i> Ø£Ø«Ø±Ù‡ Ø§Ù„Ø·ÙŠØ¨</h2>
            <p style="line-height: 1.8; font-size: 0.95rem; opacity: 0.9;">"ÙƒØ§Ù† Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡ Ø±Ø¬Ù„Ø§Ù‹ Ø·ÙŠØ¨ Ø§Ù„Ù‚Ù„Ø¨ØŒ Ù…Ø­Ø¨Ø§Ù‹ Ù„Ù„Ø®ÙŠØ±ØŒ ÙˆØ§ØµÙ„Ø§Ù‹ Ù„Ù„Ø±Ø­Ù…ØŒ ÙŠØ³Ø¹Ù‰ ÙÙŠ Ù‚Ø¶Ø§Ø¡ Ø­ÙˆØ§Ø¦Ø¬ Ø§Ù„Ù†Ø§Ø³. ØªØ±Ùƒ Ø®Ù„ÙÙ‡ Ø³ÙŠØ±Ø© Ø¹Ø·Ø±Ø© ÙˆØ£Ø³Ø±Ø© Ù…Ø­Ø¨Ø© ØªØ¯Ø¹Ùˆ Ù„Ù‡. Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡ ÙÙŠ Ù…Ø³ØªÙ‚Ø± Ø±Ø­Ù…ØªÙ‡."</p>
        </div>

        <div class="card special-card reveal">
            <h2 style="justify-content: center; color: var(--accent);"><i class="fas fa-tree"></i> Ø£Ù„Ø¨ÙˆÙ… ØµØ¯Ù‚Ø© Ø§Ù„Ù†Ø®Ù„Ø©</h2>
            <div style="background: rgba(5, 150, 105, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px; font-weight: bold;">Ù…ÙÙ‚Ø¯Ù… Ø¨ÙØ¶Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†:<br><span style="color: var(--primary); font-size: 1.2rem;">Ø§Ù„Ø²ÙˆØ¬Ø© Ø§Ù„Ù…Ø®Ù„ØµØ©ØŒ ÙˆØ¬Ù…ÙŠØ¹ Ø£Ø¨Ù†Ø§Ø¦Ù‡ ÙˆØ¨Ù†Ø§ØªÙ‡</span></div>
            <img src="tree.jpg" alt="Ù†Ø®Ù„Ø© Ø§Ù„Ø­Ø§Ø¬ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ" class="media-box" onerror="this.style.display='none'">
            <video class="media-box" controls preload="metadata" style="background: #000;" onerror="this.style.display='none'"><source src="video.mp4" type="video/mp4"></video>
        </div>

        <div class="card reveal" style="border-top-color: var(--primary);">
            <h2 style="justify-content: center;"><i class="fas fa-book-open"></i> Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
            
            <button class="gift-btn" id="fatihaBtn" onclick="giftFatiha()">
                <i class="fas fa-heart"></i> Ø£Ù‡Ø¯ÙŠØª Ù„Ù‡ Ø§Ù„ÙØ§ØªØ­Ø©
            </button>
            <p style="font-size:0.85rem; opacity:0.8; text-align:center; margin-bottom:10px;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆØ±Ø© Ù„Ù‚Ø±Ø§Ø¡ØªÙ‡Ø§</p>

            <div class="grid-2" style="margin-bottom:10px;">
                <button class="action-btn" onclick="window.open('https://quran.com/ar/36', '_blank')"><i class="fas fa-heart" style="color:#ef4444"></i> ÙŠØ³</button>
                <button class="action-btn" onclick="window.open('https://quran.com/ar/67', '_blank')"><i class="fas fa-shield-alt" style="color:#3b82f6"></i> Ø§Ù„Ù…Ù„Ùƒ</button>
                <button class="action-btn" onclick="window.open('https://quran.com/ar/56', '_blank')"><i class="fas fa-leaf" style="color:#22c55e"></i> Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©</button>
                <button class="action-btn" onclick="window.open('https://quran.com/ar/18', '_blank')"><i class="fas fa-lightbulb" style="color:#eab308"></i> Ø§Ù„ÙƒÙ‡Ù</button>
            </div>
            <button class="action-btn" style="width:100%; flex-direction:row; justify-content:center; background:var(--primary); color:white;" onclick="window.open('https://quran.com/ar', '_blank')">
                <i class="fas fa-book" style="color:white;"></i> ØªØµÙØ­ Ø§Ù„Ù…ØµØ­Ù ÙƒØ§Ù…Ù„Ø§Ù‹
            </button>

            <div class="audio-player-box">
                <p style="font-weight:bold; font-size:0.9rem; margin-bottom:10px;"><i class="fas fa-headphones"></i> Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ù‚Ø±Ø¢Ù† ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©</p>
                <div class="grid-2">
                    <select id="audioReciter" class="quran-select" style="margin-bottom:0;" onchange="updateAudioPlayer()">
                        <option value="ar.alafasy">Ø§Ù„Ø´ÙŠØ® Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
                        <option value="ar.abdulbasitmurattal">Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø·</option>
                        <option value="ar.minshawi">Ø§Ù„Ø´ÙŠØ® Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
                    </select>
                    <select id="audioSurah" class="quran-select" style="margin-bottom:0;" onchange="updateAudioPlayer()">
                        <option value="36">Ø³ÙˆØ±Ø© ÙŠØ³</option>
                        <option value="67">Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ</option>
                        <option value="56">Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©</option>
                        <option value="18">Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù</option>
                    </select>
                </div>
                <audio id="quranAudioPlayer" controls></audio>
            </div>
        </div>

        <div class="card reveal">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h2 style="margin:0;"><i class="fas fa-quran"></i> Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</h2>
                <span style="background: var(--primary); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; font-weight: bold;">Ø§ÙƒØªÙ…Ù„Øª: <span id="globalKhatmaCount">0</span> Ù…Ø±Ø©</span>
            </div>
            <p style="font-size:0.85rem; opacity:0.8; text-align:center; margin-bottom:15px;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø²Ø¡ Ù„Ø­Ø¬Ø²Ù‡ ÙˆÙ‚Ø±Ø§Ø¡ØªÙ‡. Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹ Ù„Ø­Ø¸ÙŠØ§Ù‹.</p>
            <div class="juz-grid" id="juzGrid">
                <div style="grid-column: span 6; text-align: center; font-size: 0.8rem; color: #888; padding: 20px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡...</div>
            </div>
        </div>

        <div class="card reveal">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <h2><i class="fas fa-fingerprint"></i> Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h2>
                <button onclick="resetIndividualSebha()" style="background:none; border:none; color:#ef4444; font-weight:bold;">ØªØµÙÙŠØ±</button>
            </div>
            <div style="text-align: center; margin-bottom: 15px;">
                <div class="sebha-circle" onclick="incrementIndividualSebha()" style="border-color: var(--primary);">
                    <span class="counter" id="individualCounter" style="color: var(--primary);">0</span>
                </div>
                <div id="zekrName" style="font-weight:bold; color:var(--primary); font-size: 1.1rem; margin-top: 10px;">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</div>
            </div>
            <div style="display:flex; justify-content:center; gap:5px; flex-wrap:wrap;">
                <button class="action-btn" style="padding:10px 15px;" onclick="setZekr('Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡')">Ø§Ø³ØªØºÙØ§Ø±</button>
                <button class="action-btn" style="padding:10px 15px;" onclick="setZekr('Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡')">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ </button>
                <button class="action-btn" style="padding:10px 15px;" onclick="setZekr('Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡')">Ø­ÙˆÙ‚Ù„Ø©</button>
            </div>
        </div>

        <div class="card reveal">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <h2 style="color: #ef4444; margin:0;"><i class="fas fa-globe"></i> Ø­Ù…Ù„Ø© Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ</h2>
                <span style="background: #ef4444; color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµÙ„ÙŠÙ†</span>
            </div>
            <p style="font-size:0.85rem; opacity:0.8; text-align:center; margin-bottom:15px;">ÙŠØ¬Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯ ØªØ³Ø¨ÙŠØ­Ø§Øª ÙƒÙ„ Ø§Ù„Ø²ÙˆØ§Ø± Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
            
            <div class="progress-bar-container">
                <div class="progress-text-row">
                    <span id="targetGoalText">Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ù‚Ø§Ø¯Ù…: 10,000</span>
                    <span id="targetPercentText">0%</span>
                </div>
                <div class="progress-track">
                    <div id="sebhaProgressBar" class="progress-fill"></div>
                </div>
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <div class="sebha-circle" onclick="incrementGlobalSebha()" style="border-color:#ef4444; width:150px; height:150px;">
                    <span class="counter" id="globalSebhaCounter" style="color:#ef4444; font-size:3.5rem;">0</span>
                </div>
                <div style="font-weight:bold; color:#ef4444; font-size: 1.1rem; margin-top: 10px;">Ø§Ù„Ù„Ù‡Ù… ØµÙ„Ù ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯</div>
            </div>
        </div>

        <div class="card reveal">
            <h2 style="justify-content: space-between;"><i class="fas fa-praying-hands" style="color:#3b82f6"></i> Ø£Ø¯Ø¹ÙŠØ© ÙˆØ£Ø°ÙƒØ§Ø±</h2>
            <div class="grid-2">
                <button class="action-btn" style="background:var(--primary); color:white;" onclick="openDeadDuasModal()"><i class="fas fa-book-reader" style="color:white;"></i> 30 Ø¯Ø¹Ø§Ø¡ Ù„Ù„Ù…ØªÙˆÙÙŠ</button>
                <button class="action-btn" onclick="openAzkar('morning')"><i class="fas fa-sun" style="color:#f59e0b"></i> Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</button>
                <button class="action-btn" onclick="openAzkar('evening')"><i class="fas fa-moon" style="color:#6366f1"></i> Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</button>
                <button class="action-btn" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6;" onclick="document.getElementById('randomAyahText').innerText='ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ Ù„ÙØ­ÙÙƒÙ’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØ¥ÙÙ†ÙÙ‘ÙƒÙ Ø¨ÙØ£ÙØ¹Ù’ÙŠÙÙ†ÙÙ†ÙØ§'"><i class="fas fa-envelope-open-text" style="color:#8b5cf6"></i> Ø±Ø³Ø§Ù„Ø© Ù‚Ø±Ø¢Ù†ÙŠØ©</button>
            </div>
            <div id="randomAyahText" style="text-align:center; padding:15px; margin-top:10px; border:2px dashed var(--accent); border-radius:10px; font-family:'Amiri'; font-size:1.3rem;">"Ù„ÙØ§ ÙŠÙÙƒÙÙ„ÙÙ‘ÙÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„ÙÙ‘Ø§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§"</div>
        </div>

        <div class="card reveal">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h2><i class="fas fa-pen-fancy"></i> Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…</h2>
                <span id="dbStatus" style="font-size:0.8rem; color:#10b981;"><i class="fas fa-cloud"></i> Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±</span>
            </div>
            <textarea id="duaInput" class="dua-input" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø¯Ø¹Ø§Ø¦Ùƒ Ù„Ù„ÙˆØ§Ù„Ø¯ Ù‡Ù†Ø§ Ù„ÙŠÙ‚Ø±Ø£Ù‡ Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙˆÙŠØ¤Ù…Ù†ÙˆØ§ Ø¹Ù„ÙŠÙ‡..."></textarea>
            <button onclick="window.addGlobalDua()" class="action-btn" style="width:100%; background:var(--accent); color:#1e293b; margin-bottom:15px; flex-direction:row; justify-content:center;">
                <i class="fas fa-paper-plane" style="color:#1e293b;"></i> Ø£Ø±Ø³Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡
            </button>
            <div class="dua-list" id="duaList"></div>
        </div>

        <div class="card reveal" style="margin-bottom: 30px;">
            <h2><i class="fas fa-image"></i> Ø´Ø§Ø±Ùƒ Ø¯Ø¹Ø§Ø¡ (ØµÙˆØ±Ø©)</h2>
            <div class="share-card" id="cardCapture">
                <div style="font-family:'Amiri'; font-size:1.5rem; color:#f59e0b; margin-bottom:5px;">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</div>
                <p style="font-size:1.1rem; line-height:1.8;">"Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ø¹Ø¨Ø¯Ùƒ<br><span style="color:#f59e0b; font-weight:bold; font-size:1.4rem;">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬<br>Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ Ø¨Ù† Ø®Ø¯ÙŠØ¬Ø©</span><br>ÙˆØ¢Ù†Ø³ ÙˆØ­Ø´ØªÙ‡ ÙˆØ§Ø±Ø­Ù… ØºØ±Ø¨ØªÙ‡<br>ÙˆØ§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©"</p>
                <div style="margin-top:15px; font-size:0.8rem; opacity:0.7;">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ø£Ø³Ø±ØªÙ‡</div>
            </div>
            <button class="action-btn" style="width:100%; background:var(--accent); color:#1e293b; flex-direction:row; justify-content:center;" onclick="downloadImage('cardCapture', 'Dua_Haj_Mohamed.png')">
                <i class="fas fa-download" style="color:#1e293b"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©
            </button>
        </div>

    </div>

    <div class="floating-player">
        <div class="player-info">
            <div class="live-indicator"></div>
            <span class="player-title">Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</span>
        </div>
        <div class="player-controls">
            <div class="volume-control">
                <i class="fas fa-volume-up" id="volumeIcon" onclick="toggleMute()"></i>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
            </div>
            <button class="play-toggle" onclick="toggleRadio()"><i class="fas fa-play" id="playIcon" style="margin-right: -2px;"></i></button>
        </div>
        <audio id="radio" src="https://n0e.radiojar.com/8s5u5tpdtwzuv?rj-ttl=5&rj-tok=AAABjF_2tEIA2Bw1g4l5qf7mQw" preload="none"></audio>
    </div>

    <div class="toast-notification" id="localToast">
        <i class="fas fa-praying-hands" style="color: var(--accent); font-size: 1.8rem;"></i>
        <div id="toastText" style="flex-grow: 1; font-size: 0.95rem; line-height: 1.5; font-weight: bold; text-align: right;">Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡.</div>
        <button onclick="document.getElementById('localToast').classList.remove('show')" style="background:none; border:none; color:white; font-size:1.5rem;">&times;</button>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="close-modal" onclick="closeModal()">X</div>
            <h2 id="modalTitle" style="text-align:center; color:var(--primary); margin-bottom:15px; font-family:'Amiri'; font-size:2rem;"></h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <div id="dailyModal" class="modal">
        <div class="modal-content daily-modal-content">
            <i class="fas fa-praying-hands" style="font-size: 3rem; color: var(--accent); margin-bottom: 15px;"></i>
            <h2 style="color: var(--accent); margin-bottom: 20px; font-family: 'Amiri'; font-size: 2rem;">Ø¯Ø¹Ø§Ø¡ Ù„Ù„Ù…ØªÙˆÙÙŠ</h2>
            <div id="dailyDuaText" style="font-size: 1.3rem; line-height: 1.8; margin-bottom: 25px; font-family: 'Tajawal';"></div>
            <button onclick="document.getElementById('dailyModal').classList.remove('active')" style="background: var(--accent); color: #0f172a; border: none; padding: 10px 30px; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; width: 100%;">Ø¢Ù…ÙŠÙ†.. Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙØ­</button>
        </div>
    </div>

    <script>
        function toggleTheme() { const body = document.body; body.setAttribute('data-theme', body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'); }
        
        function giftFatiha() { 
            const btn = document.getElementById('fatihaBtn'); 
            btn.innerHTML = '<i class="fas fa-check"></i> ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ùƒ Ø§Ù„ÙØ§ØªØ­Ø©'; 
            btn.style.background = "#059669"; btn.style.color = "white"; 
            if(navigator.vibrate) navigator.vibrate(50); 
        }

        // Scroll Animation Logic (Ø¬Ø¯ÙŠØ¯)
        window.addEventListener('scroll', reveal);
        function reveal(){
            var reveals = document.querySelectorAll('.reveal');
            for(var i = 0; i < reveals.length; i++){
                var windowheight = window.innerHeight;
                var revealtop = reveals[i].getBoundingClientRect().top;
                var revealpoint = 150;
                if(revealtop < windowheight - revealpoint){
                    reveals[i].classList.add('active');
                }
            }
        }
        setTimeout(reveal, 100); // Trigger once on load

        let indCount = localStorage.getItem('ind_count') || 0;
        document.getElementById('individualCounter').innerText = indCount;
        function incrementIndividualSebha() {
            indCount++; document.getElementById('individualCounter').innerText = indCount;
            localStorage.setItem('ind_count', indCount); if(navigator.vibrate) navigator.vibrate(10);
        }
        function resetIndividualSebha() { indCount = 0; document.getElementById('individualCounter').innerText = indCount; localStorage.setItem('ind_count', 0); }
        function setZekr(text) { document.getElementById('zekrName').innerText = text; resetIndividualSebha(); }

        function updateAudioPlayer() {
            const reciter = document.getElementById('audioReciter').value;
            const surahNum = document.getElementById('audioSurah').value.padStart(3, '0');
            let baseUrl = reciter === 'ar.alafasy' ? "https://server8.mp3quran.net/afs/" : reciter === 'ar.abdulbasitmurattal' ? "https://server7.mp3quran.net/basit/" : "https://server10.mp3quran.net/minsh/";
            document.getElementById('quranAudioPlayer').src = `${baseUrl}${surahNum}.mp3`;
        }
        setTimeout(updateAudioPlayer, 1000); 

        // Radio & Audio Controls
        const radio = document.getElementById('radio'), icon = document.getElementById('playIcon');
        const volSlider = document.getElementById('volumeSlider'), volIcon = document.getElementById('volumeIcon');

        function toggleRadio() { 
            if(radio.paused) {
                radio.play();
                icon.className="fas fa-pause";
            } else {
                radio.pause();
                icon.className="fas fa-play";
                icon.style.marginRight = "-2px";
            }
        }

        volSlider.addEventListener('input', (e) => { radio.volume = e.target.value; updateVolumeIcon(radio.volume); });
        let lastVolume = 1;
        function toggleMute() {
            if (radio.volume > 0) { lastVolume = radio.volume; radio.volume = 0; volSlider.value = 0; } 
            else { radio.volume = lastVolume > 0 ? lastVolume : 1; volSlider.value = radio.volume; }
            updateVolumeIcon(radio.volume);
        }
        function updateVolumeIcon(vol) {
            if (vol == 0) volIcon.className = "fas fa-volume-mute";
            else if (vol < 0.5) volIcon.className = "fas fa-volume-down";
            else volIcon.className = "fas fa-volume-up";
        }
        radio.volume = volSlider.value;

        // Ensure Radio & Quran don't play together
        const quranPlayer = document.getElementById('quranAudioPlayer');
        quranPlayer.onplay = function() { radio.pause(); icon.className="fas fa-play"; };
        radio.onplay = function() { quranPlayer.pause(); };

                    const deadDuas = [
            "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡ØŒ ÙˆØ¹Ø§ÙÙ‡ ÙˆØ§Ø¹Ù Ø¹Ù†Ù‡ØŒ ÙˆØ£ÙƒØ±Ù… Ù†Ø²Ù„Ù‡ØŒ ÙˆÙˆØ³Ø¹ Ù…Ø¯Ø®Ù„Ù‡ØŒ ÙˆØ§ØºØ³Ù„Ù‡ Ø¨Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„Ø«Ù„Ø¬ ÙˆØ§Ù„Ø¨Ø±Ø¯ØŒ ÙˆÙ†Ù‚Ù‡ Ù…Ù† Ø§Ù„Ø®Ø·Ø§ÙŠØ§ ÙƒÙ…Ø§ ÙŠÙ†Ù‚Ù‰ Ø§Ù„Ø«ÙˆØ¨ Ø§Ù„Ø£Ø¨ÙŠØ¶ Ù…Ù† Ø§Ù„Ø¯Ù†Ø³.",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¨Ø¯Ù„Ù‡ Ø¯Ø§Ø±Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø¯Ø§Ø±Ù‡ØŒ ÙˆØ£Ù‡Ù„Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø£Ù‡Ù„Ù‡ØŒ ÙˆØ²ÙˆØ¬Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø²ÙˆØ¬Ù‡ØŒ ÙˆØ£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ£Ø¹Ø°Ù‡ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø± ÙˆÙ…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ø£Ù†Øª Ø£Ù‡Ù„Ù‡ØŒ ÙˆÙ„Ø§ ØªØ¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ù‡Ùˆ Ø£Ù‡Ù„Ù‡ØŒ ÙˆØ§Ø¬Ø²Ù‡ Ø¹Ù† Ø§Ù„Ø¥Ø­Ø³Ø§Ù† Ø¥Ø­Ø³Ø§Ù†Ø§Ù‹ ÙˆØ¹Ù† Ø§Ù„Ø¥Ø³Ø§Ø¡Ø© Ø¹ÙÙˆØ§Ù‹ ÙˆØºÙØ±Ø§Ù†Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù† ÙƒØ§Ù† Ù…Ø­Ø³Ù†Ø§Ù‹ ÙØ²Ø¯ Ù…Ù† Ø­Ø³Ù†Ø§ØªÙ‡ØŒ ÙˆØ¥Ù† ÙƒØ§Ù† Ù…Ø³ÙŠØ¦Ø§Ù‹ ÙØªØ¬Ø§ÙˆØ² Ø¹Ù† Ø³ÙŠØ¦Ø§ØªÙ‡ ÙŠØ§ Ø£Ø±Ø­Ù… Ø§Ù„Ø±Ø§Ø­Ù…ÙŠÙ†.",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø© Ù…Ù† ØºÙŠØ± Ù…Ù†Ø§Ù‚Ø´Ø© Ø­Ø³Ø§Ø¨ ÙˆÙ„Ø§ Ø³Ø§Ø¨Ù‚Ø© Ø¹Ø°Ø§Ø¨ØŒ ÙˆØ¢Ù†Ø³Ù‡ ÙÙŠ ÙˆØ­Ø¯ØªÙ‡ ÙˆÙÙŠ ÙˆØ­Ø´ØªÙ‡ ÙˆÙÙŠ ØºØ±Ø¨ØªÙ‡.",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Ø²Ù„Ù‡ Ù…Ù†Ø²Ù„Ø§Ù‹ Ù…Ø¨Ø§Ø±ÙƒØ§Ù‹ ÙˆØ£Ù†Øª Ø®ÙŠØ± Ø§Ù„Ù…Ù†Ø²Ù„ÙŠÙ†ØŒ ÙˆØ£Ù†Ø²Ù„Ù‡ Ù…Ù†Ø§Ø²Ù„ Ø§Ù„ØµØ¯ÙŠÙ‚ÙŠÙ† ÙˆØ§Ù„Ø´Ù‡Ø¯Ø§Ø¡ ÙˆØ§Ù„ØµØ§Ù„Ø­ÙŠÙ†ØŒ ÙˆØ­Ø³Ù† Ø£ÙˆÙ„Ø¦Ùƒ Ø±ÙÙŠÙ‚Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆÙ„Ø§ ØªØ¬Ø¹Ù„Ù‡ Ø­ÙØ±Ø© Ù…Ù† Ø­ÙØ± Ø§Ù„Ù†Ø§Ø±ØŒ ÙˆØ§ÙØ³Ø­ Ù„Ù‡ ÙÙŠ Ù‚Ø¨Ø±Ù‡ Ù…Ø¯ Ø¨ØµØ±Ù‡.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§ÙØ±Ø´ Ù‚Ø¨Ø±Ù‡ Ù…Ù† ÙØ±Ø§Ø´ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ£Ø¹Ø°Ù‡ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±ØŒ ÙˆØ¬Ø§ÙÙ Ø§Ù„Ø£Ø±Ø¶ Ø¹Ù† Ø¬Ù†Ø¨ÙŠÙ‡.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ù…Ù„Ø£ Ù‚Ø¨Ø±Ù‡ Ø¨Ø§Ù„Ø±Ø¶Ø§ ÙˆØ§Ù„Ù†ÙˆØ± ÙˆØ§Ù„ÙØ³Ø­Ø© ÙˆØ§Ù„Ø³Ø±ÙˆØ±ØŒ ÙˆÙ‚Ù‡Ù ÙØªÙ†Ø© Ø§Ù„Ù‚Ø¨Ø± ÙˆØ¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ ÙÙŠ Ø°Ù…ØªÙƒ ÙˆØ­Ø¨Ù„ Ø¬ÙˆØ§Ø±ÙƒØŒ ÙÙ‚Ù‡Ù ÙØªÙ†Ø© Ø§Ù„Ù‚Ø¨Ø± ÙˆØ¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ØŒ ÙˆØ£Ù†Øª Ø£Ù‡Ù„ Ø§Ù„ÙˆÙØ§Ø¡ ÙˆØ§Ù„Ø­Ù‚.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡ Ø¥Ù†Ùƒ Ø£Ù†Øª Ø§Ù„ØºÙÙˆØ± Ø§Ù„Ø±Ø­ÙŠÙ…ØŒ Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ Ø¹Ø¨Ø¯Ùƒ ÙˆØ§Ø¨Ù† Ø¹Ø¨Ø¯Ùƒ Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ³Ø¹ØªÙ‡Ø§ Ø¥Ù„Ù‰ Ø¸Ù„Ù…Ø© Ø§Ù„Ù‚Ø¨Ø±.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ ÙƒØ§Ù† ÙŠØ´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø¹Ø¨Ø¯Ùƒ ÙˆØ±Ø³ÙˆÙ„Ùƒ ÙˆØ£Ù†Øª Ø£Ø¹Ù„Ù… Ø¨Ù‡ØŒ ÙØ§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡.",
            "Ø§Ù„Ù„Ù‡Ù… ÙŠÙ…Ù† ÙƒØªØ§Ø¨Ù‡ØŒ ÙˆÙŠØ³Ø± Ø­Ø³Ø§Ø¨Ù‡ØŒ ÙˆØ«Ù‚Ù„ Ø¨Ø§Ù„Ø­Ø³Ù†Ø§Øª Ù…ÙŠØ²Ø§Ù†Ù‡ØŒ ÙˆØ«Ø¨Øª Ø¹Ù„Ù‰ Ø§Ù„ØµØ±Ø§Ø· Ø£Ù‚Ø¯Ø§Ù…Ù‡.",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ø³ÙƒÙ†Ù‡ ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù†Ø§Øª Ø¨Ø¬ÙˆØ§Ø± Ø­Ø¨ÙŠØ¨Ùƒ ÙˆÙ…ØµØ·ÙØ§Ùƒ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù….",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ù…Ù†Ù‡ Ù…Ù† ÙØ²Ø¹ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©ØŒ ÙˆÙ…Ù† Ù‡ÙˆÙ„ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©ØŒ ÙˆØ§Ø¬Ø¹Ù„ Ù†ÙØ³Ù‡ Ø¢Ù…Ù†Ø© Ù…Ø·Ù…Ø¦Ù†Ø©.",
            "Ø§Ù„Ù„Ù‡Ù… Ù„Ù‚Ù†Ù‡ Ø­Ø¬ØªÙ‡ØŒ ÙˆØ§Ø¬Ø¹Ù„Ù‡ ÙÙŠ Ø¨Ø·Ù† Ø§Ù„Ù‚Ø¨Ø± Ù…Ø·Ù…Ø¦Ù†Ø§Ù‹ØŒ ÙˆØ¹Ù†Ø¯ Ù‚ÙŠØ§Ù… Ø§Ù„Ø£Ø´Ù‡Ø§Ø¯ Ø¢Ù…Ù†Ø§Ù‹ØŒ ÙˆØ¨Ø¬ÙˆØ¯ Ø±Ø¶ÙˆØ§Ù†Ùƒ ÙˆØ§Ø«Ù‚Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ù†Ø¸Ø± Ø¥Ù„ÙŠÙ‡ Ù†Ø¸Ø±Ø© Ø±Ø¶Ø§ØŒ ÙØ¥Ù† Ù…Ù† ØªÙ†Ø¸Ø± Ø¥Ù„ÙŠÙ‡ Ù†Ø¸Ø±Ø© Ø±Ø¶Ø§ Ù„Ø§ ØªØ¹Ø°Ø¨Ù‡ Ø£Ø¨Ø¯Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø£Ø³ÙƒÙ†Ù‡ ÙØ³ÙŠØ­ Ø§Ù„Ø¬Ù†Ø§Ù†ØŒ ÙˆØ§ØºÙØ± Ù„Ù‡ ÙŠØ§ Ø±Ø­Ù…Ù†ØŒ ÙˆØ§Ø±Ø­Ù…Ù‡ ÙŠØ§ Ø±Ø­ÙŠÙ…ØŒ ÙˆØªØ¬Ø§ÙˆØ² Ø¹Ù…Ø§ ØªØ¹Ù„Ù… ÙŠØ§ Ø¹Ù„ÙŠÙ….",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¹Ù Ø¹Ù†Ù‡ ÙØ¥Ù†Ùƒ Ø§Ù„Ù‚Ø§Ø¦Ù„ 'ÙˆÙŠØ¹ÙÙˆ Ø¹Ù† ÙƒØ«ÙŠØ±'ØŒ ÙˆØ§Ø¬Ø¹Ù„Ù‡ Ù…Ù† Ø§Ù„Ø°ÙŠÙ† Ø³Ø¹Ø¯ÙˆØ§ ÙÙŠ Ø§Ù„Ø¬Ù†Ø© Ø®Ø§Ù„Ø¯ÙŠÙ† ÙÙŠÙ‡Ø§.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¨Ø´Ø±Ù‡ Ø¨Ù‚ÙˆÙ„Ùƒ 'ÙƒÙ„ÙˆØ§ ÙˆØ§Ø´Ø±Ø¨ÙˆØ§ Ù‡Ù†ÙŠØ¦Ø§Ù‹ Ø¨Ù…Ø§ Ø£Ø³Ù„ÙØªÙ… ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®Ø§Ù„ÙŠØ©'.",
            "Ø§Ù„Ù„Ù‡Ù… Ø´ÙØ¹ ÙÙŠÙ‡ Ù†Ø¨ÙŠÙ†Ø§ ÙˆÙ…ØµØ·ÙØ§ÙƒØŒ ÙˆØ§Ø­Ø´Ø±Ù‡ ØªØ­Øª Ù„ÙˆØ§Ø¦Ù‡ØŒ ÙˆØ§Ø³Ù‚Ù‡ Ù…Ù† ÙŠØ¯Ù‡ Ø§Ù„Ø´Ø±ÙŠÙØ© Ø´Ø±Ø¨Ø© Ù‡Ù†ÙŠØ¦Ø© Ù„Ø§ ÙŠØ¸Ù…Ø£ Ø¨Ø¹Ø¯Ù‡Ø§ Ø£Ø¨Ø¯Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù‡ Ø¨ÙƒÙ„ Ø­Ø±Ù ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø­Ù„Ø§ÙˆØ©ØŒ ÙˆØ¨ÙƒÙ„ ÙƒÙ„Ù…Ø© ÙƒØ±Ø§Ù…Ø©ØŒ ÙˆØ¨ÙƒÙ„ Ø¢ÙŠØ© Ø³Ø¹Ø§Ø¯Ø©ØŒ ÙˆØ¨ÙƒÙ„ Ø³ÙˆØ±Ø© Ø³Ù„Ø§Ù…Ø©.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø­Ù…Ù‡ ÙØ¥Ù†Ù‡ ÙƒØ§Ù† Ù…Ø³Ù„Ù…Ø§Ù‹ØŒ ÙˆØ§ØºÙØ± Ù„Ù‡ ÙØ¥Ù†Ù‡ ÙƒØ§Ù† Ù…Ø¤Ù…Ù†Ø§Ù‹ØŒ ÙˆØ£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø© ÙØ¥Ù†Ù‡ ÙƒØ§Ù† Ø¨Ù†Ø¨ÙŠÙƒ Ù…ØµØ¯Ù‚Ø§Ù‹.",
            "Ø§Ù„Ù„Ù‡Ù… Ø´ÙØ¹ ÙÙŠÙ‡ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ ÙˆØ´ÙØ¹ ÙÙŠÙ‡ Ø§Ù„ØµÙŠØ§Ù…ØŒ ÙˆØ´ÙØ¹ ÙÙŠÙ‡ Ù†Ø¨ÙŠÙƒ Ø§Ù„Ù…Ø®ØªØ§Ø±ØŒ ÙˆØ£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø© Ø¨Ø³Ù„Ø§Ù….",
            "Ø§Ù„Ù„Ù‡Ù… Ù„Ø§ ØªØ­Ø±Ù…Ù†Ø§ Ø£Ø¬Ø±Ù‡ØŒ ÙˆÙ„Ø§ ØªÙØªÙ†Ø§ Ø¨Ø¹Ø¯Ù‡ØŒ ÙˆØ§ØºÙØ± Ù„Ù†Ø§ ÙˆÙ„Ù‡ØŒ ÙˆØ§Ø¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡ ÙÙŠ Ø¬Ù†Ø§Øª Ø§Ù„Ù†Ø¹ÙŠÙ….",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù‡ Ù…Ù† Ø¹Ø¨Ø§Ø¯Ùƒ Ø§Ù„Ø³Ø¹Ø¯Ø§Ø¡ØŒ ÙˆØ§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ù†ÙˆØ±Ø§Ù‹ ÙˆØ¶ÙŠØ§Ø¡Ù‹ØŒ ÙˆØ§ØºÙØ± Ù„Ù‡ Ù…Ø§ ØªÙ‚Ø¯Ù… Ù…Ù† Ø°Ù†Ø¨Ù‡ ÙˆÙ…Ø§ ØªØ£Ø®Ø±.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø­Ù… Ø¶Ø¹ÙÙ‡ ÙˆÙˆØ­Ø¯ØªÙ‡ØŒ ÙˆØ§Ø¬Ø¹Ù„ Ø£Ø¹Ù…Ø§Ù„Ù‡ Ø§Ù„ØµØ§Ù„Ø­Ø© Ø£Ù†ÙŠØ³Ø§Ù‹ Ù„Ù‡ ÙÙŠ Ù‚Ø¨Ø±Ù‡ØŒ ÙˆØ§ÙØªØ­ Ù„Ù‡ Ø¨Ø§Ø¨Ø§Ù‹ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ù†Ø© Ù„Ø§ ÙŠØ³Ø¯.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ Ù†Ø²Ù„ Ø¨Ùƒ ÙˆØ£Ù†Øª Ø®ÙŠØ± Ù…Ù†Ø²ÙˆÙ„ Ø¨Ù‡ØŒ ÙˆØ£ØµØ¨Ø­ ÙÙ‚ÙŠØ±Ø§Ù‹ Ø¥Ù„Ù‰ Ø±Ø­Ù…ØªÙƒ ÙˆØ£Ù†Øª ØºÙ†ÙŠ Ø¹Ù† Ø¹Ø°Ø§Ø¨Ù‡.",
            "Ø§Ù„Ù„Ù‡Ù… Ø¢ØªÙ‡ Ø¨Ø±Ø­Ù…ØªÙƒ ÙˆØ±Ø¶Ø§ÙƒØŒ ÙˆÙ‚Ù‡Ù ÙØªÙ†Ø© Ø§Ù„Ù‚Ø¨Ø± ÙˆØ¹Ø°Ø§Ø¨Ù‡ØŒ ÙˆØ¢ØªÙ‡ Ø¨Ø±Ø­Ù…ØªÙƒ Ø§Ù„Ø£Ù…Ù† Ù…Ù† Ø¹Ø°Ø§Ø¨Ùƒ Ø­ØªÙ‰ ØªØ¨Ø¹Ø«Ù‡ Ø¥Ù„Ù‰ Ø¬Ù†ØªÙƒ.",
            "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø°Ø±ÙŠØªÙ‡ Ø³ØªØ±Ø§Ù‹ Ù„Ù‡ Ù…Ù† Ø§Ù„Ù†Ø§Ø±ØŒ ÙˆØ§Ø¬Ø¹Ù„ Ø¯Ø¹Ø§Ø¡Ù†Ø§ Ù„Ù‡ Ù†ÙˆØ±Ø§Ù‹ ÙŠØµÙ„Ù‡ ÙÙŠ Ù‚Ø¨Ø±Ù‡ØŒ ÙˆØ§Ø±ÙØ¹ Ø¯Ø±Ø¬ØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ù‡Ø¯ÙŠÙŠÙ†."
        ];

        
        function openDeadDuasModal() { 
            document.getElementById('modalTitle').innerText = 'Ø£Ø¯Ø¹ÙŠØ© Ù„Ù„Ù…ØªÙˆÙÙŠ'; 
            let content = '<div style="text-align:right;">'; 
            deadDuas.forEach((dua, idx) => { content += `<div class="dua-item" style="border-right-color:#059669; margin-bottom:15px;"><strong>${idx + 1}.</strong> ${dua}</div>`; }); 
            document.getElementById('modalBody').innerHTML = content + '</div>'; 
            document.getElementById('modal').classList.add('active'); 
        }

        function openAzkar(type) { 
            document.getElementById('modalTitle').innerText = type === 'morning' ? 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­' : 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡'; 
            document.getElementById('modalBody').innerHTML = '<div style="text-align:right; font-size:1.2rem; line-height:2;">1. Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ.<br>2. Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ† (3 Ù…Ø±Ø§Øª).<br>3. ' + (type === 'morning' ? 'Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡.' : 'Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ£Ù…Ø³Ù‰ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡.') + '</div>'; 
            document.getElementById('modal').classList.add('active'); 
        }
        function closeModal() { document.getElementById('modal').classList.remove('active'); }

        function checkDailyDua() {
            const today = new Date().toDateString(); 
            if (localStorage.getItem('daily_visit') !== today) {
                document.getElementById('dailyDuaText').innerText = `"${deadDuas[Math.floor(Math.random() * deadDuas.length)]}"`;
                document.getElementById('dailyModal').classList.add('active');
                localStorage.setItem('daily_visit', today);
            }
        }
        setTimeout(checkDailyDua, 1000);

        function showPeriodicToast() {
            const toast = document.getElementById('localToast');
            const toastText = document.getElementById('toastText');
            toastText.innerText = deadDuas[Math.floor(Math.random() * deadDuas.length)];
            toast.classList.add('show');
            if(navigator.vibrate) navigator.vibrate([100, 50, 100]);
            setTimeout(() => { toast.classList.remove('show'); }, 8000);
        }
        setTimeout(showPeriodicToast, 10000);
        setInterval(showPeriodicToast, 15 * 60 * 1000);

        function downloadImage(elementId, fileName) { html2canvas(document.getElementById(elementId), {backgroundColor: "#1e293b"}).then(canvas => { const link = document.createElement('a'); link.download = fileName; link.href = canvas.toDataURL(); link.click(); }); }
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const app = initializeApp({
          apiKey: "AIzaSyAbzVBetgxuzIhf6gHhsqdK_CbkUERIgus",
          authDomain: "sadaqa-640e8.firebaseapp.com",
          projectId: "sadaqa-640e8",
          storageBucket: "sadaqa-640e8.firebasestorage.app",
          messagingSenderId: "141593582678",
          appId: "1:141593582678:web:16b3cf49e7c0273a2deff7"
        });
        const db = getFirestore(app);

        // --- Ø³Ø¬Ù„ Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ---
        try {
            onSnapshot(collection(db, 'duas'), (snapshot) => {
                const duas = []; snapshot.forEach((doc) => { duas.push({ id: doc.id, ...doc.data() }); });
                duas.sort((a, b) => b.timestamp - a.timestamp); 
                const list = document.getElementById('duaList'); list.innerHTML = '';
                if(duas.length === 0) list.innerHTML = '<div style="text-align:center; opacity:0.6;">ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙƒØªØ¨ Ø¯Ø¹Ø§Ø¡ Ù„Ù„ÙˆØ§Ù„Ø¯...</div>';
                duas.forEach(d => { list.innerHTML += `<div class="dua-item">ğŸ¤² ${d.text}</div>`; });
            });
        } catch(e) {}

        window.addGlobalDua = async function() {
            const input = document.getElementById('duaInput'); const text = input.value.trim();
            if (text === '') return;
            try { input.value = ''; await addDoc(collection(db, 'duas'), { text: text, timestamp: Date.now() }); } catch (e) { alert("Ø®Ø·Ø£ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª"); input.value = text; }
        }

        // --- Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© + Ø´Ø±ÙŠØ· Ø§Ù„Ù‡Ø¯Ù ---
        const sebhaDocRef = doc(db, 'stats', 'global_sebha');
        const targetStep = 10000;

        onSnapshot(sebhaDocRef, (docSnap) => {
            if (docSnap.exists()) {
                const count = docSnap.data().count || 0;
                document.getElementById('globalSebhaCounter').innerText = count.toLocaleString();

                let currentTarget = targetStep;
                while (count >= currentTarget) currentTarget += targetStep;
                document.getElementById('targetGoalText').innerText = `Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ù‚Ø§Ø¯Ù…: ${currentTarget.toLocaleString()}`;
                let percent = (count / currentTarget) * 100;
                if(percent > 100) percent = 100;
                document.getElementById('sebhaProgressBar').style.width = percent + '%';
                document.getElementById('targetPercentText').innerText = Math.floor(percent) + '%';
            }
            else setDoc(sebhaDocRef, { count: 0 });
        });

        // Safe & Fast Increment Logic (10/10)
        window.incrementGlobalSebha = async function() {
            if(navigator.vibrate) navigator.vibrate(15);
            
            // 1. Optimistic UI Update (Immediate)
            const counterElement = document.getElementById('globalSebhaCounter');
            let currentVal = parseInt(counterElement.innerText.replace(/,/g, '')) || 0;
            counterElement.innerText = (currentVal + 1).toLocaleString();
            
            // 2. Safe Database Update
            try { 
                await updateDoc(sebhaDocRef, { count: increment(1) }); 
            } catch (e) { 
                console.log("Error updating count");
                counterElement.innerText = currentVal.toLocaleString(); // Revert on error
            }
        }

        // --- Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© ---
        const khatmaRef = doc(db, 'stats', 'global_khatma');
        const khatmaStatsRef = doc(db, 'stats', 'khatma_stats');

        onSnapshot(khatmaStatsRef, (docSnap) => {
            if(docSnap.exists()) document.getElementById('globalKhatmaCount').innerText = docSnap.data().completed || 0;
            else setDoc(khatmaStatsRef, { completed: 0 });
        });

        onSnapshot(khatmaRef, (docSnap) => {
            let state = {};
            if(docSnap.exists()) {
                state = docSnap.data();
            } else {
                for(let i=1; i<=30; i++) state[`juz${i}`] = false;
                setDoc(khatmaRef, state);
                return;
            }

            const grid = document.getElementById('juzGrid');
            grid.innerHTML = '';
            let completedParts = 0;

            for(let i=1; i<=30; i++) {
                const isRead = state[`juz${i}`];
                if(isRead) completedParts++;

                const btn = document.createElement('div');
                btn.className = `juz-btn ${isRead ? 'read' : ''}`;
                btn.innerHTML = isRead ? '<i class="fas fa-check"></i>' : i;
                
                if(!isRead) {
                    btn.onclick = async () => {
                        if(confirm(`Ù‡Ù„ ØªÙ†ÙˆÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¬Ø²Ø¡ Ø±Ù‚Ù… ${i} Ø¨Ù†ÙŠØ© Ø§Ù„ØµØ¯Ù‚Ø©ØŸ Ø³ÙŠØªÙ… Ø­Ø¬Ø²Ù‡ Ø¨Ø§Ø³Ù…Ùƒ.`)) {
                            try { await updateDoc(khatmaRef, { [`juz${i}`]: true }); } catch(e) { alert('Ø®Ø·Ø£ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„'); }
                        }
                    };
                } else {
                    btn.onclick = () => alert('Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ØªÙ… Ø­Ø¬Ø²Ù‡ Ø£Ùˆ Ù‚Ø±Ø§Ø¡ØªÙ‡ Ù…Ù† Ø´Ø®Øµ Ø¢Ø®Ø±. Ø¬Ø²Ø§ÙƒÙ… Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ø§Ù‹.');
                }
                grid.appendChild(btn);
            }

            if(completedParts === 30) {
                setTimeout(async () => {
                    alert('ğŸ‰ Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡! ØªÙ…Øª Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… Ø¨Ø¯Ø¡ Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©.');
                    await updateDoc(khatmaStatsRef, { completed: increment(1) });
                    let resetState = {};
                    for(let i=1; i<=30; i++) resetState[`juz${i}`] = false;
                    await setDoc(khatmaRef, resetState);
                }, 1500);
            }
        });

        // --- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± ---
        const visitorsRef = doc(db, 'stats', 'visitors_count');
        onSnapshot(visitorsRef, (docSnap) => {
            if (docSnap.exists()) {
                document.getElementById('visitorsCount').innerText = (docSnap.data().count || 0).toLocaleString();
            } else {
                setDoc(visitorsRef, { count: 0 });
            }
        });

        if (!sessionStorage.getItem('has_visited')) {
            sessionStorage.setItem('has_visited', 'true');
            setTimeout(async () => {
                try { await updateDoc(visitorsRef, { count: increment(1) }); } catch (e) {}
            }, 2000);
        }

    </script>
</body>
</html>

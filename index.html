<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù„Ù‰ Ø±ÙˆØ­ Ø§Ù„Ù…ØºÙÙˆØ± Ù„Ù‡ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ Ø§Ø¨Ù† Ø®Ø¯ÙŠØ¬Ø©.">
    <meta name="theme-color" content="#1e293b">
    <title>Ù†ÙˆØ± | Ù…. Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root { --primary: #059669; --dark: #0f172a; --light: #f8fafc; --accent: #fbbf24; --glass: rgba(255, 255, 255, 0.98); --shadow: 0 4px 20px rgba(0,0,0,0.08); }
        [data-theme="dark"] { --primary: #34d399; --dark: #020617; --light: #111827; --glass: rgba(30, 41, 59, 0.98); --text: #f1f5f9; }
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Tajawal', sans-serif; background: var(--light); color: [data-theme="dark"] ? #fff : #333; transition: 0.3s; padding-bottom: 120px; background-image: radial-gradient(var(--primary) 0.5px, transparent 0.5px); background-size: 20px 20px; }
        
        header { background: linear-gradient(160deg, #064e3b, #065f46); color: white; padding: 50px 20px 80px; text-align: center; border-radius: 0 0 50px 50px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .theme-btn { position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; }
        
        .smart-greeting { font-size: 0.9rem; color: #fbbf24; margin-bottom: 5px; font-weight: bold; background: rgba(0,0,0,0.2); display: inline-block; padding: 5px 15px; border-radius: 20px;}
        .title-text { font-size: 1.3rem; color: #fbbf24; font-weight: bold; margin-bottom: 5px; margin-top: 10px; }
        .deceased-name { font-size: 2rem; font-weight: 900; color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.3); line-height: 1.3; }
        
        .container { max-width: 600px; margin: -50px auto 0; padding: 0 15px; position: relative; z-index: 10; }
        
        .friday-banner { display: none; background: linear-gradient(45deg, #fbbf24, #f59e0b); color: #000; text-align: center; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-weight: bold; box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .card { background: var(--glass); border-radius: 20px; padding: 20px; margin-bottom: 15px; box-shadow: var(--shadow); border-top: 4px solid var(--primary); }
        [data-theme="dark"] .card { background: #1e293b; color: white; border: none; border-top: 4px solid var(--primary); }
        .card h2 { font-size: 1.2rem; margin-bottom: 15px; color: var(--primary); display: flex; align-items: center; gap: 10px; }

        .special-card { border-top: 4px solid var(--accent) !important; box-shadow: 0 10px 25px rgba(251, 191, 36, 0.15); text-align: center; }
        .media-box { width: 100%; border-radius: 15px; margin-bottom: 15px; border: 2px solid rgba(0,0,0,0.05); }
        .date-badge { display: inline-block; background: var(--primary); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; margin-bottom: 15px; }
        .family-dedication { background: rgba(5, 150, 105, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px dashed var(--primary); }
        [data-theme="dark"] .family-dedication { background: rgba(251, 191, 36, 0.1); border-color: var(--accent); }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .action-btn { background: rgba(0,0,0,0.03); padding: 15px; border-radius: 12px; text-align: center; cursor: pointer; font-weight: bold; color: inherit; display: flex; flex-direction: column; align-items: center; gap: 5px; font-size: 0.95rem; border: none; text-decoration: none; transition: 0.2s; }
        [data-theme="dark"] .action-btn { background: rgba(255,255,255,0.05); color: white; }
        .action-btn i { font-size: 1.5rem; color: var(--primary); }
        .action-btn:active { transform: scale(0.95); }
        
        .juz-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); gap: 8px; margin-bottom: 15px; }
        .juz-btn { background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; padding: 10px 0; text-align: center; font-weight: bold; cursor: pointer; transition: 0.3s; color: inherit; }
        [data-theme="dark"] .juz-btn { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); }
        .juz-btn.read { background: var(--primary); color: white; border-color: var(--primary); }

        .dua-input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #ccc; margin-bottom: 10px; font-family: inherit; resize: none; }
        [data-theme="dark"] .dua-input { background: #0f172a; color: white; border-color: #334155; }
        .dua-list { max-height: 250px; overflow-y: auto; text-align: right; padding-right: 5px; }
        .dua-item { background: rgba(0,0,0,0.02); padding: 12px; border-radius: 8px; margin-bottom: 8px; border-right: 3px solid var(--accent); font-size: 0.95rem; line-height: 1.5; }
        [data-theme="dark"] .dua-item { background: rgba(255,255,255,0.05); }

        .gift-btn { width: 100%; padding: 15px; background: var(--accent); color: #1e293b; border: none; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: center; gap: 10px; transition: 0.2s; }
        .gift-btn:active { transform: scale(0.98); }
        
        .global-sebha-badge { background: #ef4444; color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        
        .sebha-circle { width: 130px; height: 130px; background: var(--light); border-radius: 50%; margin: 10px auto; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 4px solid var(--primary); cursor: pointer; user-select: none; }
        [data-theme="dark"] .sebha-circle { background: rgba(255,255,255,0.05); }
        .counter { font-size: 3rem; font-weight: 800; color: var(--primary); }

        .prophet-circle { border-color: #ef4444; width: 150px; height: 150px; }
        .prophet-circle .counter { color: #ef4444; font-size: 3.5rem; }

        .share-card { background: #1e293b; color: white; padding: 25px; border-radius: 15px; text-align: center; border: 2px solid var(--accent); margin-bottom: 15px; }

        .floating-player { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--glass); backdrop-filter: blur(10px); padding: 12px 20px; border-top: 1px solid rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between; z-index: 100; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); }
        [data-theme="dark"] .floating-player { background: #1e293b; color: white; }
        .play-toggle { width: 45px; height: 45px; background: var(--primary); color: white; border-radius: 50%; border: none; cursor: pointer; display: grid; place-items: center; font-size: 1.2rem; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; padding: 10px; overflow-y: auto; justify-content: center; align-items: flex-start; }
        .modal.active { display: flex; }
        .modal-content { background: #fff; width: 100%; max-width: 600px; border-radius: 20px; padding: 20px; margin-top: 20px; position: relative; min-height: 50vh; }
        [data-theme="dark"] .modal-content { background: #1e293b; color: white; }
        .close-modal { position: sticky; top: 0; left: 0; background: #ef4444; color: white; width: 35px; height: 35px; border-radius: 50%; display: grid; place-items: center; cursor: pointer; float: left; margin-bottom: 10px; z-index: 5; }
        
        .quran-text { font-family: 'Amiri', serif; font-size: 1.5rem; line-height: 2.6; text-align: center; white-space: pre-wrap; padding-bottom: 30px; }
        .basmala { font-family: 'Amiri', serif; color: var(--primary); font-size: 1.5rem; margin-bottom: 20px; display: block; }
        .ayah-number { color: var(--accent); font-size: 1.2rem; }
        .loader { text-align: center; font-weight: bold; color: var(--primary); padding: 20px; }
        
        .dua-dead-item { font-size: 1.1rem; line-height: 1.8; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px dashed rgba(0,0,0,0.1); text-align: right; }
        [data-theme="dark"] .dua-dead-item { border-color: rgba(255,255,255,0.1); }
        .dua-number { color: var(--primary); font-weight: bold; margin-left: 5px; font-size: 1.2rem; }
        
        .ayah-box { background: #f8fafc; border: 2px dashed var(--accent); padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 15px; font-family: 'Amiri', serif; font-size: 1.3rem; line-height: 1.8; color: #333; }
        [data-theme="dark"] .ayah-box { background: #0f172a; color: #fff; }

        .toast-notification { position: fixed; bottom: 85px; left: 50%; transform: translateX(-50%) translateY(200%); background: #0f172a; color: white; padding: 15px 20px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); border: 2px solid var(--accent); display: flex; align-items: center; gap: 15px; z-index: 1000; transition: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); width: 90%; max-width: 400px; }
        .toast-notification.show { transform: translateX(-50%) translateY(0); }
        .toast-close { background: rgba(255,255,255,0.1); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; display: grid; place-items: center; }
        
        .cloud-badge { display: inline-block; font-size: 0.8rem; color: #10b981; margin-top: 5px; background: rgba(16, 185, 129, 0.1); padding: 5px 10px; border-radius: 20px; border: 1px solid #10b981; }

        .daily-modal-content { background: linear-gradient(135deg, #064e3b, #0f172a); color: white; text-align: center; border: 4px solid var(--accent); border-radius: 25px; padding: 30px 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.5); }
        .daily-modal-content i.fa-moon { font-size: 3rem; color: var(--accent); margin-bottom: 15px; }
        .daily-modal-content h2 { color: var(--accent); margin-bottom: 20px; font-family: 'Amiri', serif; font-size: 2rem; }
        .daily-dua-text { font-size: 1.3rem; line-height: 1.8; margin-bottom: 25px; font-family: 'Tajawal', sans-serif; }
        .btn-close-daily { background: var(--accent); color: #0f172a; border: none; padding: 10px 30px; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; width: 100%; }

        /* Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ */
        .quran-select { width: 100%; padding: 12px; font-size: 1rem; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1); background: var(--light); color: inherit; font-family: 'Tajawal'; margin-bottom: 10px; font-weight: bold; }
        [data-theme="dark"] .quran-select { background: #0f172a; color: white; border-color: rgba(255,255,255,0.1); }
        .audio-player-box { background: rgba(5, 150, 105, 0.1); padding: 15px; border-radius: 15px; text-align: center; margin-top: 10px; border: 1px dashed var(--primary); }
        [data-theme="dark"] .audio-player-box { background: rgba(52, 211, 153, 0.05); }
        audio { width: 100%; height: 40px; margin-top: 10px; outline: none; }
    </style>
</head>
<body>

    <header>
        <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
        <div class="smart-greeting" id="smartGreeting">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <div class="intro-text">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù„Ù‰ Ø±ÙˆØ­ Ø§Ù„Ù…ØºÙÙˆØ± Ù„Ù‡ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡</div>
        <div class="title-text">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬</div>
        <div class="deceased-name">Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ Ø§Ø¨Ù† Ø®Ø¯ÙŠØ¬Ø©</div>
        <p style="font-size:0.9rem; margin-top:10px; opacity:0.9;">Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©</p>
    </header>

    <div class="container">

        <div class="friday-banner" id="fridayBanner">
            <i class="fas fa-mosque"></i> Ø§Ù„ÙŠÙˆÙ… Ø¬Ù…Ø¹Ø© Ù…Ø¨Ø§Ø±ÙƒØ©.. Ù„Ø§ ØªÙ†Ø³ÙˆØ§ Ù‚Ø±Ø§Ø¡Ø© Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡ÙØŒ ÙˆØ§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŒ ÙˆØ§Ù„Ø¯Ø¹Ø§Ø¡ Ù„ÙˆØ§Ù„Ø¯Ù†Ø§.
        </div>

        <div class="card" style="text-align: center;">
            <h2><i class="fas fa-dove" style="color:var(--accent)"></i> Ø£Ø«Ø±Ù‡ Ø§Ù„Ø·ÙŠØ¨</h2>
            <p style="line-height: 1.8; font-size: 0.95rem; opacity: 0.9;">
                "ÙƒØ§Ù† Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡ Ø±Ø¬Ù„Ø§Ù‹ Ø·ÙŠØ¨ Ø§Ù„Ù‚Ù„Ø¨ØŒ Ù…Ø­Ø¨Ø§Ù‹ Ù„Ù„Ø®ÙŠØ±ØŒ ÙˆØ§ØµÙ„Ø§Ù‹ Ù„Ù„Ø±Ø­Ù…ØŒ ÙŠØ³Ø¹Ù‰ ÙÙŠ Ù‚Ø¶Ø§Ø¡ Ø­ÙˆØ§Ø¦Ø¬ Ø§Ù„Ù†Ø§Ø³. ØªØ±Ùƒ Ø®Ù„ÙÙ‡ Ø³ÙŠØ±Ø© Ø¹Ø·Ø±Ø© ÙˆØ£Ø³Ø±Ø© Ù…Ø­Ø¨Ø© ØªØ¯Ø¹Ùˆ Ù„Ù‡. Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡ ÙÙŠ Ù…Ø³ØªÙ‚Ø± Ø±Ø­Ù…ØªÙ‡."
            </p>
        </div>

        <div class="card">
            <h2><i class="fas fa-envelope-open-text" style="color:#8b5cf6"></i> Ø±Ø³Ø§Ù„Ø© Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…</h2>
            <div class="ayah-box" id="randomAyahText">
                "ÙˆÙØ§Ø³Ù’ØªÙØ¹ÙÙŠÙ†ÙÙˆØ§ Ø¨ÙØ§Ù„ØµÙ‘ÙØ¨Ù’Ø±Ù ÙˆÙØ§Ù„ØµÙ‘ÙÙ„ÙØ§Ø©Ù Ûš ÙˆÙØ¥ÙÙ†Ù‘ÙÙ‡ÙØ§ Ù„ÙÙƒÙØ¨ÙÙŠØ±ÙØ©ÙŒ Ø¥ÙÙ„Ù‘ÙØ§ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø®ÙØ§Ø´ÙØ¹ÙÙŠÙ†Ù"
            </div>
            <button class="action-btn" style="width:100%; background:rgba(139, 92, 246, 0.1); color:#8b5cf6; flex-direction:row; justify-content:center;" onclick="changeAyah()">
                <i class="fas fa-sync-alt" style="color:#8b5cf6"></i> Ø±Ø³Ø§Ù„Ø© Ø£Ø®Ø±Ù‰
            </button>
        </div>

        <div class="card special-card">
            <h2 style="justify-content: center; color: var(--accent); font-size: 1.4rem;">
                <i class="fas fa-tree"></i> Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ù†Ø®Ù„Ø© ÙˆÙˆØ«ÙŠÙ‚Ø© Ø§Ù„ØµØ¯Ù‚Ø©
            </h2>
            <div class="date-badge"><i class="fas fa-calendar-alt"></i> ØºØ±Ø© Ø±Ù…Ø¶Ø§Ù† (19 ÙØ¨Ø±Ø§ÙŠØ± 2026)</div>
            <div class="family-dedication">
                <p style="font-size: 1rem; line-height: 1.8; font-weight: bold;">
                    Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­ Ù…ÙÙ‚Ø¯Ù… Ø¨ÙØ¶Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†:<br>
                    <span style="color: var(--primary); font-size: 1.2rem;">Ø§Ù„Ø²ÙˆØ¬Ø© Ø§Ù„Ù…Ø®Ù„ØµØ©ØŒ ÙˆØ¬Ù…ÙŠØ¹ Ø£Ø¨Ù†Ø§Ø¦Ù‡ ÙˆØ¨Ù†Ø§ØªÙ‡</span>
                </p>
            </div>
            <img src="sak.jpg" alt="ØµÙƒ Ø§Ù„Ù†Ø®ÙŠÙ„" class="media-box" onerror="this.style.display='none'">
            <img src="tree.jpg" alt="Ù†Ø®Ù„Ø© Ø§Ù„Ø­Ø§Ø¬ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ" class="media-box" onerror="this.style.display='none'">
            <video class="media-box" controls preload="metadata" style="background: #000;">
                <source src="video.mp4" type="video/mp4">
            </video>
        </div>

        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h2 style="margin:0;"><i class="fas fa-praying-hands" style="color:#3b82f6"></i> Ø£Ø¯Ø¹ÙŠØ© Ø¬Ø§Ù…Ø¹Ø© Ù„Ù„Ù…ØªÙˆÙÙŠ</h2>
            </div>
            <div class="grid-2">
                <button class="action-btn" style="background:var(--primary); color:white;" onclick="openDeadDuasModal()">
                    <i class="fas fa-book-reader" style="color:white; font-size: 1.2rem;"></i> Ù‚Ø±Ø§Ø¡Ø© 30 Ø¯Ø¹Ø§Ø¡
                </button>
                <button class="action-btn" style="background:#3b82f6; color:white;" onclick="downloadDuaBooklet()">
                    <i class="fas fa-download" style="color:white; font-size: 1.2rem;"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªÙŠØ¨
                </button>
            </div>
        </div>

        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h2 style="margin:0;"><i class="fas fa-quran"></i> Ø®ØªÙ…Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</h2>
                <button onclick="resetKhatmah()" style="background:none; border:none; color:#ef4444; font-size:0.8rem; cursor:pointer;">Ø¨Ø¯Ø¡ Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </div>
            <p style="font-size:0.85rem; opacity:0.8; margin-bottom:15px;">Ø§Ø®ØªØ± Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø°ÙŠ Ù‚Ø±Ø£ØªÙ‡ ÙˆØ§Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ Ù„ÙŠØªØ­ÙˆÙ„ Ù„Ù„Ø£Ø®Ø¶Ø±.</p>
            <div class="juz-grid" id="juzGrid"></div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ØµÙˆØªÙŠØ§Øª -->
        <div class="card">
            <h2><i class="fas fa-book-open"></i> Ù‚Ø±Ø§Ø¡Ø© ÙˆØªÙ„Ø§ÙˆØ© Ø§Ù„Ù‚Ø±Ø¢Ù†</h2>
            <button class="gift-btn" id="fatihaBtn" onclick="giftFatiha()" style="margin-bottom: 10px;">
                <i class="fas fa-heart"></i> Ø£Ù‡Ø¯ÙŠØª Ù„Ù‡ Ø§Ù„ÙØ§ØªØ­Ø©
            </button>
            <p style="font-size:0.85rem; opacity:0.8; margin-bottom:15px; text-align:right;">Ù‚Ø±Ø§Ø¡Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø³ÙˆØ± Ø§Ù„Ù…Ù†Ø¬ÙŠØ©:</p>
            <div class="grid-2">
                <button class="action-btn" onclick="fetchSurah(36, 'Ø³ÙˆØ±Ø© ÙŠØ³')"><i class="fas fa-heart" style="color:#ef4444"></i> ÙŠØ³</button>
                <button class="action-btn" onclick="fetchSurah(67, 'Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ')"><i class="fas fa-shield-alt" style="color:#3b82f6"></i> Ø§Ù„Ù…Ù„Ùƒ</button>
                <button class="action-btn" onclick="fetchSurah(56, 'Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©')"><i class="fas fa-leaf" style="color:#22c55e"></i> Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©</button>
                <button class="action-btn" onclick="fetchSurah(18, 'Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù')"><i class="fas fa-lightbulb" style="color:#eab308"></i> Ø§Ù„ÙƒÙ‡Ù</button>
            </div>

            <!-- Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ -->
            <div class="audio-player-box">
                <p style="font-weight:bold; font-size:0.9rem; margin-bottom:10px;"><i class="fas fa-headphones"></i> Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ù‚Ø±Ø¢Ù† ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©</p>
                <div class="grid-2">
                    <select id="audioReciter" class="quran-select" style="margin-bottom:0;" onchange="updateAudioPlayer()">
                        <option value="ar.alafasy">Ø§Ù„Ø´ÙŠØ® Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
                        <option value="ar.abdulbasitmurattal">Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø·</option>
                        <option value="ar.minshawi">Ø§Ù„Ø´ÙŠØ® Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
                        <option value="ar.dosari">Ø§Ù„Ø´ÙŠØ® ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ</option>
                    </select>
                    <select id="audioSurah" class="quran-select" style="margin-bottom:0;" onchange="updateAudioPlayer()">
                        <option value="36">Ø³ÙˆØ±Ø© ÙŠØ³</option>
                        <option value="67">Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ</option>
                        <option value="56">Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©</option>
                        <option value="18">Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù</option>
                        <option value="1">Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©</option>
                        <option value="2">Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©</option>
                    </select>
                </div>
                <audio id="quranAudioPlayer" controls></audio>
            </div>
            
            <!-- Ø²Ø±Ø§Ø± Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ÙƒØ§Ù…Ù„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ -->
            <a href="https://quran.com/ar" target="_blank" class="action-btn" style="width:100%; margin-top:15px; background:var(--primary); color:white; flex-direction:row; justify-content:center; gap:10px; text-decoration:none; padding: 20px; border-radius: 15px;">
                <i class="fas fa-external-link-alt" style="color:white; font-size:1.4rem;"></i>
                <span style="font-size:1.1rem;">Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙ ÙƒØ§Ù…Ù„Ø§Ù‹ (Ù…ÙˆÙ‚Ø¹ Ø®Ø§Ø±Ø¬ÙŠ)</span>
            </a>
        </div>

        <!-- Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ø³Ø¨Ø­Ø© -->
        <div class="card">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <h2><i class="fas fa-fingerprint"></i> Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆÙ…Ø³Ø¨Ø­Ø© Ø§Ù„Ù†Ø¨ÙŠ ï·º</h2>
                <button onclick="resetSebha()" style="background:none; border:none; color:#ef4444; font-weight:bold;">ØªØµÙÙŠØ± Ø§Ù„Ø³Ø¨Ø­Ø©</button>
            </div>
            
            <div class="grid-2" style="margin-bottom: 20px;">
                <!-- Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© (Ù…Ø±Ø¨ÙˆØ·Ø© Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±) -->
                <div style="text-align: center;">
                    <span class="global-sebha-badge"><i class="fas fa-users"></i> Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµÙ„ÙŠÙ†</span>
                    <div class="sebha-circle prophet-circle" onclick="incrementGlobalSebha()" style="margin-top:5px;">
                        <span class="counter" id="globalSebhaCounter">...</span>
                    </div>
                    <div style="font-weight:bold; color:#ef4444; font-size: 0.9rem; margin-top: 5px;">Ø§Ù„Ù„Ù‡Ù… ØµÙ„Ù Ø¹Ù„Ù‰ Ù…Ø­Ù…Ø¯</div>
                </div>
                
                <!-- Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø®Ø§ØµØ© (Ù…Ø­Ù„ÙŠØ©) -->
                <div style="text-align: center;">
                    <span style="display:inline-block; padding: 5px 10px; opacity:0; font-size:0.8rem;">Ù…Ø³Ø§ÙØ©</span>
                    <div class="sebha-circle" onclick="countSebha()" style="margin-top:5px;">
                        <span class="counter" id="counter">0</span>
                    </div>
                    <div id="zekrName" style="font-weight:bold; color:var(--primary); font-size: 0.9rem; margin-top: 5px;">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</div>
                </div>
            </div>

            <div style="display:flex; justify-content:center; gap:5px; flex-wrap:wrap; margin-bottom:20px;">
                <button onclick="setZekr('Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡')" style="padding:5px 10px; border-radius:5px; border:1px solid rgba(0,0,0,0.1); background:transparent; color:inherit; cursor:pointer;">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</button>
                <button onclick="setZekr('Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡')" style="padding:5px 10px; border-radius:5px; border:1px solid rgba(0,0,0,0.1); background:transparent; color:inherit; cursor:pointer;">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</button>
                <button onclick="setZekr('Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡')" style="padding:5px 10px; border-radius:5px; border:1px solid rgba(0,0,0,0.1); background:transparent; color:inherit; cursor:pointer;">Ø§Ù„Ø­ÙˆÙ‚Ù„Ø©</button>
            </div>
            <div class="grid-2">
                <button class="action-btn" onclick="openAzkar('morning')"><i class="fas fa-sun" style="color:#f59e0b"></i> Ø§Ù„ØµØ¨Ø§Ø­</button>
                <button class="action-btn" onclick="openAzkar('evening')"><i class="fas fa-moon" style="color:#6366f1"></i> Ø§Ù„Ù…Ø³Ø§Ø¡</button>
            </div>
        </div>

        <!-- Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡ (Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©) -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h2><i class="fas fa-pen-fancy"></i> Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…</h2>
                <span class="cloud-badge" id="dbStatus"><i class="fas fa-cloud"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
            </div>
            <textarea id="duaInput" class="dua-input" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø¯Ø¹Ø§Ø¦Ùƒ Ù„ÙŠØ±Ø§Ù‡ Ø§Ù„Ø¬Ù…ÙŠØ¹..."></textarea>
            <button onclick="window.addGlobalDua()" class="action-btn" style="width:100%; background:var(--accent); color:#1e293b; margin-bottom:15px; flex-direction:row; justify-content:center;">
                <i class="fas fa-paper-plane" style="font-size:1rem; color:#1e293b;"></i> Ø£Ø¶Ù Ø§Ù„Ø¯Ø¹Ø§Ø¡
            </button>
            <div class="dua-list" id="duaList"></div>
        </div>

        <!-- ÙƒØ§Ø±Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© -->
        <div class="card" style="margin-bottom: 30px;">
            <h2><i class="fas fa-image"></i> Ø´Ø§Ø±Ùƒ Ø¯Ø¹Ø§Ø¡ (ØµÙˆØ±Ø©)</h2>
            <div class="share-card" id="cardCapture">
                <div style="font-family:'Amiri'; font-size:1.5rem; color:#f59e0b; margin-bottom:5px;">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</div>
                <p style="font-size:1.1rem; line-height:1.8;">
                    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ø¹Ø¨Ø¯Ùƒ<br>
                    <span style="color:#f59e0b; font-weight:bold; font-size:1.4rem;">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ø­Ø§Ø¬<br>Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ Ø¨Ù† Ø®Ø¯ÙŠØ¬Ø©</span><br>
                    ÙˆØ¢Ù†Ø³ ÙˆØ­Ø´ØªÙ‡ ÙˆØ§Ø±Ø­Ù… ØºØ±Ø¨ØªÙ‡<br>ÙˆØ§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©"
                </p>
                <div style="margin-top:15px; font-size:0.8rem; opacity:0.7;">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ø£Ø³Ø±ØªÙ‡</div>
            </div>
            <button class="action-btn" style="width:100%; background:var(--accent); color:#1e293b; flex-direction:row; justify-content:center;" onclick="downloadImage('cardCapture', 'Dua_Haj_Mohamed.png')">
                <i class="fas fa-download" style="color:#1e293b"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©
            </button>
        </div>

    </div>

    <!-- ÙƒØªÙŠØ¨ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="bookletCapture" style="position:absolute; top:-9999px; left:-9999px; background:#1e293b; color:white; padding:40px; width:600px; border-radius:20px; text-align:center; direction:rtl; border:4px solid #f59e0b;">
        <h1 style="font-family:'Amiri'; color:#f59e0b; margin-bottom:20px;">ÙƒØªÙŠØ¨ Ø§Ù„Ø¯Ø¹Ø§Ø¡</h1>
        <h2 style="font-family:'Tajawal'; margin-bottom:30px;">ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© Ø¹Ù† Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ</h2>
        <div style="font-family:'Tajawal'; text-align:right; font-size:1.2rem; line-height:2;">
            1. Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡ ÙˆØ¹Ø§ÙÙ‡ ÙˆØ§Ø¹Ù Ø¹Ù†Ù‡.<br>
            2. Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©.<br>
            3. Ø§Ù„Ù„Ù‡Ù… Ø§ØºØ³Ù„Ù‡ Ø¨Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„Ø«Ù„Ø¬ ÙˆØ§Ù„Ø¨Ø±Ø¯.<br>
            4. Ø§Ù„Ù„Ù‡Ù… Ø£Ø¨Ø¯Ù„Ù‡ Ø¯Ø§Ø±Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø¯Ø§Ø±Ù‡.<br>
            5. Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ø£Ù†Øª Ø£Ù‡Ù„Ù‡ ÙˆÙ„Ø§ ØªØ¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ù‡Ùˆ Ø£Ù‡Ù„Ù‡.<br>
            6. Ø§Ù„Ù„Ù‡Ù… Ø£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø© Ù…Ù† ØºÙŠØ± Ù…Ù†Ø§Ù‚Ø´Ø© Ø­Ø³Ø§Ø¨.<br>
            7. Ø§Ù„Ù„Ù‡Ù… Ø¢Ù†Ø³Ù‡ ÙÙŠ ÙˆØ­Ø¯ØªÙ‡ ÙˆÙÙŠ ÙˆØ­Ø´ØªÙ‡.<br>
            8. Ø§Ù„Ù„Ù‡Ù… Ø§Ø³Ù‚Ù‡ Ù…Ù† Ø­ÙˆØ¶ Ù†Ø¨ÙŠÙƒ Ø´Ø±Ø¨Ø© Ù‡Ù†ÙŠØ¦Ø©.<br>
            9. Ø§Ù„Ù„Ù‡Ù… Ø´ÙØ¹ ÙÙŠÙ‡ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ØµÙŠØ§Ù….<br>
            10. Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡ ÙÙŠ Ø§Ù„ÙØ±Ø¯ÙˆØ³ Ø§Ù„Ø£Ø¹Ù„Ù‰.
        </div>
        <p style="margin-top:30px; color:#f59e0b; font-size:0.9rem;">Ù†Ø³Ø£Ù„ÙƒÙ… Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„Ù‡ Ø¨Ø§Ù„Ø±Ø­Ù…Ø© ÙˆØ§Ù„Ù…ØºÙØ±Ø©</p>
    </div>

    <div class="floating-player">
        <div style="display:flex; align-items:center; gap:10px;">
            <div style="width:10px; height:10px; background:red; border-radius:50%; animation:blink 1s infinite;"></div>
            <span style="font-weight:bold; color:var(--primary); font-size:0.9rem;">Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</span>
        </div>
        <button class="play-toggle" onclick="toggleRadio()"><i class="fas fa-play" id="playIcon"></i></button>
        <audio id="radio" src="https://n0e.radiojar.com/8s5u5tpdtwzuv?rj-ttl=5&rj-tok=AAABjF_2tEIA2Bw1g4l5qf7mQw"></audio>
    </div>

    <div class="toast-notification" id="localToast">
        <i class="fas fa-praying-hands" style="color: var(--accent); font-size: 1.8rem;"></i>
        <div style="flex-grow: 1; font-size: 0.95rem; line-height: 1.5; font-weight: bold; text-align: right;">
            Ù„Ø§ ØªÙ†Ø³Ù Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¢Ù† Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒ Ø¨Ø§Ù„Ø±Ø­Ù…Ø© ÙˆØ§Ù„Ù…ØºÙØ±Ø©.
        </div>
        <button class="toast-close" onclick="closeToast()"><i class="fas fa-times"></i></button>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙˆØ± ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø± -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="close-modal" onclick="closeModal()">&times;</div>
            <h2 id="modalTitle" style="text-align:center; color:var(--primary); margin-bottom:15px;"></h2>
            <div id="modalBody" class="quran-text"></div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© -->
    <div id="dailyModal" class="modal">
        <div class="modal-content daily-modal-content">
            <i class="fas fa-moon"></i>
            <h2>Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… Ù„Ù„Ù…ØªÙˆÙÙŠ</h2>
            <div id="dailyDuaText" class="daily-dua-text"></div>
            <button class="btn-close-daily" onclick="closeDailyModal()">Ø¢Ù…ÙŠÙ†.. Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <!-- Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ -->
    <script>
        // Ø§Ù„ØªØ­ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©
        const hour = new Date().getHours();
        let greeting = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ";
        if (hour >= 4 && hour < 12) greeting = "â˜€ï¸ ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±ØŒ Ù„Ø§ ØªÙ†Ø³Ù Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­";
        else if (hour >= 12 && hour < 16) greeting = "ğŸ•Œ Ø·Ø§Ø¨ ÙŠÙˆÙ…Ùƒ Ø¨Ø°ÙƒØ± Ø§Ù„Ù„Ù‡";
        else greeting = "ğŸŒ™ Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±ØŒ Ù„Ø§ ØªÙ†Ø³Ù Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡";
        document.getElementById('smartGreeting').innerText = greeting;

        const ayahs = [ "ÙˆÙØ§Ø³Ù’ØªÙØ¹ÙÙŠÙ†ÙÙˆØ§ Ø¨ÙØ§Ù„ØµÙ‘ÙØ¨Ù’Ø±Ù ÙˆÙØ§Ù„ØµÙ‘ÙÙ„ÙØ§Ø©Ù Ûš ÙˆÙØ¥ÙÙ†Ù‘ÙÙ‡ÙØ§ Ù„ÙÙƒÙØ¨ÙÙŠØ±ÙØ©ÙŒ Ø¥ÙÙ„Ù‘ÙØ§ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø®ÙØ§Ø´ÙØ¹ÙÙŠÙ†Ù", "Ù„ÙØ§ ÙŠÙÙƒÙÙ„Ù‘ÙÙÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù†ÙÙÙ’Ø³Ù‹Ø§ Ø¥ÙÙ„Ù‘ÙØ§ ÙˆÙØ³Ù’Ø¹ÙÙ‡ÙØ§", "ÙÙØ¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§ * Ø¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§", "ÙˆÙÙ‚ÙØ§Ù„Ù Ø±ÙØ¨Ù‘ÙÙƒÙÙ…Ù Ø§Ø¯Ù’Ø¹ÙÙˆÙ†ÙÙŠ Ø£ÙØ³Ù’ØªÙØ¬ÙØ¨Ù’ Ù„ÙÙƒÙÙ…Ù’", "ÙˆÙØ±ÙØ­Ù’Ù…ÙØªÙÙŠ ÙˆÙØ³ÙØ¹ÙØªÙ’ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù", "Ø¥ÙÙ†Ù‘ÙÙ…ÙØ§ ÙŠÙÙˆÙÙÙ‘ÙÙ‰ Ø§Ù„ØµÙ‘ÙØ§Ø¨ÙØ±ÙÙˆÙ†Ù Ø£ÙØ¬Ù’Ø±ÙÙ‡ÙÙ… Ø¨ÙØºÙÙŠÙ’Ø±Ù Ø­ÙØ³ÙØ§Ø¨Ù", "ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ Ù„ÙØ­ÙÙƒÙ’Ù…Ù Ø±ÙØ¨Ù‘ÙÙƒÙ ÙÙØ¥ÙÙ†Ù‘ÙÙƒÙ Ø¨ÙØ£ÙØ¹Ù’ÙŠÙÙ†ÙÙ†ÙØ§", "Ø³ÙÙŠÙØ¬Ù’Ø¹ÙÙ„Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¨ÙØ¹Ù’Ø¯Ù Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§" ];
        function changeAyah() { document.getElementById('randomAyahText').innerText = `"${ayahs[Math.floor(Math.random() * ayahs.length)]}"`; }

        const deadDuas = ["Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡ØŒ ÙˆØ¹Ø§ÙÙ‡ ÙˆØ§Ø¹Ù Ø¹Ù†Ù‡ØŒ ÙˆØ£ÙƒØ±Ù… Ù†Ø²Ù„Ù‡ØŒ ÙˆÙˆØ³Ø¹ Ù…Ø¯Ø®Ù„Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø§ØºØ³Ù„Ù‡ Ø¨Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„Ø«Ù„Ø¬ ÙˆØ§Ù„Ø¨Ø±Ø¯ØŒ ÙˆÙ†Ù‚Ù‡ Ù…Ù† Ø§Ù„Ø®Ø·Ø§ÙŠØ§ ÙƒÙ…Ø§ ÙŠÙ†Ù‚Ù‰ Ø§Ù„Ø«ÙˆØ¨ Ø§Ù„Ø£Ø¨ÙŠØ¶ Ù…Ù† Ø§Ù„Ø¯Ù†Ø³.","Ø§Ù„Ù„Ù‡Ù… Ø£Ø¨Ø¯Ù„Ù‡ Ø¯Ø§Ø±Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø¯Ø§Ø±Ù‡ØŒ ÙˆØ£Ù‡Ù„Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø£Ù‡Ù„Ù‡ØŒ ÙˆØ²ÙˆØ¬Ø§Ù‹ Ø®ÙŠØ±Ø§Ù‹ Ù…Ù† Ø²ÙˆØ¬Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ£Ø¹Ø°Ù‡ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±ØŒ ÙˆÙ…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±.","Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ø£Ù†Øª Ø£Ù‡Ù„Ù‡ØŒ ÙˆÙ„Ø§ ØªØ¹Ø§Ù…Ù„Ù‡ Ø¨Ù…Ø§ Ù‡Ùˆ Ø£Ù‡Ù„Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø²Ù‡ Ø¹Ù† Ø§Ù„Ø¥Ø­Ø³Ø§Ù† Ø¥Ø­Ø³Ø§Ù†Ø§Ù‹ØŒ ÙˆØ¹Ù† Ø§Ù„Ø¥Ø³Ø§Ø¡Ø© Ø¹ÙÙˆØ§Ù‹ ÙˆØºÙØ±Ø§Ù†Ø§Ù‹.","Ø§Ù„Ù„Ù‡Ù… Ø¥Ù† ÙƒØ§Ù† Ù…Ø­Ø³Ù†Ø§Ù‹ ÙØ²Ø¯ Ù…Ù† Ø­Ø³Ù†Ø§ØªÙ‡ØŒ ÙˆØ¥Ù† ÙƒØ§Ù† Ù…Ø³ÙŠØ¦Ø§Ù‹ ÙØªØ¬Ø§ÙˆØ² Ø¹Ù† Ø³ÙŠØ¦Ø§ØªÙ‡.","Ø§Ù„Ù„Ù‡Ù… Ø£Ø¯Ø®Ù„Ù‡ Ø§Ù„Ø¬Ù†Ø© Ù…Ù† ØºÙŠØ± Ù…Ù†Ø§Ù‚Ø´Ø© Ø­Ø³Ø§Ø¨ ÙˆÙ„Ø§ Ø³Ø§Ø¨Ù‚Ø© Ø¹Ø°Ø§Ø¨.","Ø§Ù„Ù„Ù‡Ù… Ø¢Ù†Ø³Ù‡ ÙÙŠ ÙˆØ­Ø¯ØªÙ‡ØŒ ÙˆÙÙŠ ÙˆØ­Ø´ØªÙ‡ØŒ ÙˆÙÙŠ ØºØ±Ø¨ØªÙ‡.","Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Ø²Ù„Ù‡ Ù…Ù†Ø²Ù„Ø§Ù‹ Ù…Ø¨Ø§Ø±ÙƒØ§Ù‹ØŒ ÙˆØ£Ù†Øª Ø®ÙŠØ± Ø§Ù„Ù…Ù†Ø²Ù„ÙŠÙ†.","Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Ø²Ù„Ù‡ Ù…Ù†Ø§Ø²Ù„ Ø§Ù„ØµØ¯ÙŠÙ‚ÙŠÙ† ÙˆØ§Ù„Ø´Ù‡Ø¯Ø§Ø¡ ÙˆØ§Ù„ØµØ§Ù„Ø­ÙŠÙ†ØŒ ÙˆØ­Ø³Ù† Ø£ÙˆÙ„Ø¦Ùƒ Ø±ÙÙŠÙ‚Ø§Ù‹.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‚Ø¨Ø±Ù‡ Ø±ÙˆØ¶Ø© Ù…Ù† Ø±ÙŠØ§Ø¶ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆÙ„Ø§ ØªØ¬Ø¹Ù„Ù‡ Ø­ÙØ±Ø© Ù…Ù† Ø­ÙØ± Ø§Ù„Ù†Ø§Ø±.","Ø§Ù„Ù„Ù‡Ù… Ø§ÙØ³Ø­ Ù„Ù‡ ÙÙŠ Ù‚Ø¨Ø±Ù‡ Ù…Ø¯ Ø¨ØµØ±Ù‡ØŒ ÙˆØ§ÙØ±Ø´ Ù‚Ø¨Ø±Ù‡ Ù…Ù† ÙØ±Ø§Ø´ Ø§Ù„Ø¬Ù†Ø©.","Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ø°Ù‡ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±ØŒ ÙˆØ¬Ø§ÙÙ Ø§Ù„Ø£Ø±Ø¶ Ø¹Ù† Ø¬Ù†Ø¨ÙŠÙ‡.","Ø§Ù„Ù„Ù‡Ù… Ø§Ù…Ù„Ø£ Ù‚Ø¨Ø±Ù‡ Ø¨Ø§Ù„Ø±Ø¶Ø§ ÙˆØ§Ù„Ù†ÙˆØ± ÙˆØ§Ù„ÙØ³Ø­Ø© ÙˆØ§Ù„Ø³Ø±ÙˆØ±.","Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ ÙÙŠ Ø°Ù…ØªÙƒ ÙˆØ­Ø¨Ù„ Ø¬ÙˆØ§Ø±ÙƒØŒ ÙÙ‚Ù‡ ÙØªÙ†Ø© Ø§Ù„Ù‚Ø¨Ø± ÙˆØ¹Ø°Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±.","Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø£Ù†Øª Ø§Ù„ØºÙÙˆØ± Ø§Ù„Ø±Ø­ÙŠÙ…ØŒ ÙØ§ØºÙØ± Ù„Ù‡ ÙˆØ§Ø±Ø­Ù…Ù‡ Ø¥Ù†Ùƒ Ø£Ù†Øª Ø§Ù„ØªÙˆØ§Ø¨ Ø§Ù„Ø±Ø­ÙŠÙ….","Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ Ø¹Ø¨Ø¯Ùƒ ÙˆØ§Ø¨Ù† Ø¹Ø¨Ø¯ÙƒØŒ Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ³Ø¹ØªÙ‡Ø§ Ø¥Ù„Ù‰ Ø¸Ù„Ù…Ø© Ø§Ù„Ù‚Ø¨Ø±ØŒ ÙØ§Ø±Ø­Ù…Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ù‡ ÙƒØ§Ù† ÙŠØ´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø¹Ø¨Ø¯Ùƒ ÙˆØ±Ø³ÙˆÙ„ÙƒØŒ ÙˆØ£Ù†Øª Ø£Ø¹Ù„Ù… Ø¨Ù‡.","Ø§Ù„Ù„Ù‡Ù… ÙŠÙ…Ù† ÙƒØªØ§Ø¨Ù‡ØŒ ÙˆÙŠØ³Ø± Ø­Ø³Ø§Ø¨Ù‡ØŒ ÙˆØ«Ù‚Ù„ Ø¨Ø§Ù„Ø­Ø³Ù†Ø§Øª Ù…ÙŠØ²Ø§Ù†Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø«Ø¨Øª Ø£Ù‚Ø¯Ø§Ù…Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ØµØ±Ø§Ø·ØŒ ÙˆØ£Ø³ÙƒÙ†Ù‡ ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù†Ø§Øª.","Ø§Ù„Ù„Ù‡Ù… Ø£Ø·Ø¹Ù…Ù‡ Ù…Ù† Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ§Ø³Ù‚Ù‡ Ù…Ù† Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ£Ø±Ù‡ Ù…ÙƒØ§Ù†Ù‡ Ù…Ù† Ø§Ù„Ø¬Ù†Ø©.","Ø§Ù„Ù„Ù‡Ù… Ø¨Ø´Ø±Ù‡ Ø¨Ù‚ÙˆÙ„Ùƒ: (ÙƒÙ„ÙˆØ§ ÙˆØ§Ø´Ø±Ø¨ÙˆØ§ Ù‡Ù†ÙŠØ¦Ø§Ù‹ Ø¨Ù…Ø§ Ø£Ø³Ù„ÙØªÙ… ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®Ø§Ù„ÙŠØ©).","Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù‡ Ù…Ù† Ø§Ù„Ø°ÙŠÙ† Ø³Ø¹Ø¯ÙˆØ§ ÙÙŠ Ø§Ù„Ø¬Ù†Ø© Ø®Ø§Ù„Ø¯ÙŠÙ† ÙÙŠÙ‡Ø§ Ù…Ø§ Ø¯Ø§Ù…Øª Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª ÙˆØ§Ù„Ø£Ø±Ø¶.","Ø§Ù„Ù„Ù‡Ù… Ø´ÙØ¹ ÙÙŠÙ‡ Ù†Ø¨ÙŠÙ†Ø§ ÙˆÙ…ØµØ·ÙØ§ÙƒØŒ ÙˆØ§Ø­Ø´Ø±Ù‡ ØªØ­Øª Ù„ÙˆØ§Ø¦Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø³Ù‚Ù‡ Ù…Ù† ÙŠØ¯ Ø­Ø¨ÙŠØ¨Ùƒ Ù…Ø­Ù…Ø¯ ï·º Ø´Ø±Ø¨Ø© Ù‡Ù†ÙŠØ¦Ø© Ù„Ø§ ÙŠØ¸Ù…Ø£ Ø¨Ø¹Ø¯Ù‡Ø§ Ø£Ø¨Ø¯Ø§Ù‹.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù‡ Ø¨ÙƒÙ„ Ø­Ø±Ù ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø­Ù„Ø§ÙˆØ©ØŒ ÙˆØ¨ÙƒÙ„ ÙƒÙ„Ù…Ø© ÙƒØ±Ø§Ù…Ø©ØŒ ÙˆØ¨ÙƒÙ„ Ø¢ÙŠØ© Ø³Ø¹Ø§Ø¯Ø©.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø­Ù…Ù‡ ÙØ¥Ù†Ù‡ ÙƒØ§Ù† Ù…Ø³Ù„Ù…Ø§Ù‹ØŒ ÙˆØ§ØºÙØ± Ù„Ù‡ ÙØ¥Ù†Ù‡ ÙƒØ§Ù† Ù…Ø¤Ù…Ù†Ø§Ù‹.","Ø§Ù„Ù„Ù‡Ù… Ù„Ø§ ØªØ­Ø±Ù…Ù†Ø§ Ø£Ø¬Ø±Ù‡ØŒ ÙˆÙ„Ø§ ØªÙØªÙ†Ø§ Ø¨Ø¹Ø¯Ù‡ØŒ ÙˆØ§ØºÙØ± Ù„Ù†Ø§ ÙˆÙ„Ù‡.","Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡ ÙˆØ¨Ù…Ù† Ù†Ø­Ø¨ ÙÙŠ Ø§Ù„ÙØ±Ø¯ÙˆØ³ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ø¬Ù†Ø© ÙŠØ§ Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†."];

        function checkDailyDua() {
            const today = new Date().toDateString(); 
            const lastVisit = localStorage.getItem('last_daily_dua_date');
            if (lastVisit !== today) {
                const randomDua = deadDuas[Math.floor(Math.random() * deadDuas.length)];
                document.getElementById('dailyDuaText').innerText = `"${randomDua}"`;
                document.getElementById('dailyModal').classList.add('active');
                localStorage.setItem('last_daily_dua_date', today);
            }
        }
        function closeDailyModal() { document.getElementById('dailyModal').classList.remove('active'); }

        function openDeadDuasModal() { document.getElementById('modalTitle').innerText = 'Ø£Ø¯Ø¹ÙŠØ© Ù„Ù„Ù…ØªÙˆÙÙŠ'; let content = '<div style="text-align:right; font-family:Tajawal;">'; deadDuas.forEach((dua, index) => { content += `<div class="dua-dead-item"><span class="dua-number">${index + 1}.</span> ${dua}</div>`; }); content += '</div>'; document.getElementById('modalBody').innerHTML = content; document.getElementById('modal').classList.add('active'); }

        window.onload = function() {
            if (new Date().getDay() === 5) document.getElementById('fridayBanner').style.display = 'block';
            renderKhatmah(); changeAyah(); checkDailyDua();
            setTimeout(() => { showToast(); setInterval(showToast, 3 * 60 * 1000); }, 15000);
        };

        function showToast() { const toast = document.getElementById('localToast'); toast.classList.add('show'); if(navigator.vibrate) navigator.vibrate([100, 50, 100]); setTimeout(() => { closeToast(); }, 8000); }
        function closeToast() { document.getElementById('localToast').classList.remove('show'); }
        function toggleTheme() { const body = document.body; body.setAttribute('data-theme', body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'); }

        let readJuz = JSON.parse(localStorage.getItem('khatmah_juz')) || [];
        function renderKhatmah() { const grid = document.getElementById('juzGrid'); grid.innerHTML = ''; for(let i=1; i<=30; i++) { const btn = document.createElement('div'); btn.className = `juz-btn ${readJuz.includes(i) ? 'read' : ''}`; btn.innerText = i; btn.onclick = () => toggleJuz(i); grid.appendChild(btn); } }
        function toggleJuz(index) { readJuz.includes(index) ? readJuz = readJuz.filter(j => j !== index) : readJuz.push(index); localStorage.setItem('khatmah_juz', JSON.stringify(readJuz)); renderKhatmah(); }
        function resetKhatmah() { if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØµÙÙŠØ± Ø§Ù„Ø®ØªÙ…Ø©ØŸ")) { readJuz = []; localStorage.setItem('khatmah_juz', '[]'); renderKhatmah(); } }

        async function fetchSurah(number, title) { 
            document.getElementById('modalTitle').innerText = title; 
            document.getElementById('modalBody').innerHTML = '<div class="loader">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©...</div>'; 
            document.getElementById('modal').classList.add('active'); 
            try { 
                const res = await fetch(`https://api.alquran.cloud/v1/surah/${number}`); 
                const data = await res.json(); 
                let fullText = number !== 9 && number !== 1 ? `<span class="basmala">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù</span>` : ""; 
                data.data.ayahs.forEach(a => {
                    let text = a.text;
                    if(number !== 1 && number !== 9) text = text.replace("Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù", "");
                    fullText += `${text} <span class="ayah-number">(${a.numberInSurah})</span> `;
                }); 
                document.getElementById('modalBody').innerHTML = fullText; 
            } catch (e) { 
                document.getElementById('modalBody').innerHTML = `ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª`; 
            } 
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠØ§Øª
        function updateAudioPlayer() {
            const reciter = document.getElementById('audioReciter').value;
            const surahNum = document.getElementById('audioSurah').value.padStart(3, '0');
            let baseUrl = "";
            if(reciter === 'ar.alafasy') baseUrl = "https://server8.mp3quran.net/afs/";
            if(reciter === 'ar.abdulbasitmurattal') baseUrl = "https://server7.mp3quran.net/basit/";
            if(reciter === 'ar.minshawi') baseUrl = "https://server10.mp3quran.net/minsh/";
            if(reciter === 'ar.dosari') baseUrl = "https://server11.mp3quran.net/yasser/";
            document.getElementById('quranAudioPlayer').src = `${baseUrl}${surahNum}.mp3`;
        }
        setTimeout(updateAudioPlayer, 1000);

        const azkarDB = { 'morning': `<div style="text-align:right; line-height:1.8;"><b>Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­:</b><br><br>Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ.<br>Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ† (3 Ù…Ø±Ø§Øª).<br>"Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØª ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø´ÙˆØ±".</div>`, 'evening': `<div style="text-align:right; line-height:1.8;"><b>Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡:</b><br><br>Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ.<br>Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ† (3 Ù…Ø±Ø§Øª).<br>"Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØª ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù…ØµÙŠØ±".</div>` };
        function openAzkar(type) { document.getElementById('modalTitle').innerText = type === 'morning' ? 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­' : 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡'; document.getElementById('modalBody').innerHTML = azkarDB[type]; document.getElementById('modal').classList.add('active'); }
        function closeModal() { document.getElementById('modal').classList.remove('active'); }

        // Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
        let count = localStorage.getItem('sebha_count') || 0; document.getElementById('counter').innerText = count;
        function countSebha() { count++; document.getElementById('counter').innerText = count; localStorage.setItem('sebha_count', count); if(navigator.vibrate) navigator.vibrate(10); }
        function resetSebha() { if(confirm("ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŸ")) { count=0; document.getElementById('counter').innerText=0; localStorage.setItem('sebha_count',0); } }
        function setZekr(txt) { document.getElementById('zekrName').innerText = txt; count=0; document.getElementById('counter').innerText=0; localStorage.setItem('sebha_count',0); }

        const radio = document.getElementById('radio'), icon = document.getElementById('playIcon');
        function toggleRadio() { radio.paused ? (radio.play(), icon.className="fas fa-pause") : (radio.pause(), icon.className="fas fa-play"); }

        function giftFatiha() { const btn = document.getElementById('fatihaBtn'); btn.innerHTML = '<i class="fas fa-check"></i> ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ùƒ Ø§Ù„ÙØ§ØªØ­Ø©'; btn.style.background = "#059669"; btn.style.color = "white"; if(navigator.vibrate) navigator.vibrate(50); }
        function downloadImage(elementId, fileName) { html2canvas(document.getElementById(elementId), {backgroundColor: "#1e293b", scale: 2}).then(canvas => { const link = document.createElement('a'); link.download = fileName; link.href = canvas.toDataURL(); link.click(); }); }
        function downloadDuaBooklet() { downloadImage('bookletCapture', 'Dua_Booklet_Haj_Mohamed.png'); }
    </script>

    <!-- Ø³ÙƒØ±ÙŠØ¨Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Firebase) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAbzVBetgxuzIhf6gHhsqdK_CbkUERIgus",
          authDomain: "sadaqa-640e8.firebaseapp.com",
          projectId: "sadaqa-640e8",
          storageBucket: "sadaqa-640e8.firebasestorage.app",
          messagingSenderId: "141593582678",
          appId: "1:141593582678:web:16b3cf49e7c0273a2deff7"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 1. Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø­ÙŠ
        try {
            const duasRef = collection(db, 'duas');
            onSnapshot(duasRef, (snapshot) => {
                const duas = [];
                snapshot.forEach((doc) => { duas.push({ id: doc.id, ...doc.data() }); });
                duas.sort((a, b) => b.timestamp - a.timestamp); 
                
                const list = document.getElementById('duaList');
                list.innerHTML = '';
                if(duas.length === 0) {
                    list.innerHTML = '<div style="text-align:center; padding: 20px; opacity: 0.6;">ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙƒØªØ¨ Ø¯Ø¹Ø§Ø¡ Ù„Ù„ÙˆØ§Ù„Ø¯...</div>';
                }
                duas.forEach(d => {
                    list.innerHTML += `<div class="dua-item"><i class="fas fa-quote-right" style="color:var(--accent); font-size:0.8rem;"></i> ${d.text}</div>`;
                });
                document.getElementById('dbStatus').innerHTML = '<i class="fas fa-cloud"></i> Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±';
            }, (error) => {
                console.error("Firebase Error: ", error);
                document.getElementById('dbStatus').innerHTML = '<i class="fas fa-exclamation-triangle" style="color:red;"></i> Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±';
            });
        } catch(e) { console.error(e); }

        window.addGlobalDua = async function() {
            const input = document.getElementById('duaInput');
            const text = input.value.trim();
            if (text === '') return;
            
            try {
                input.value = ''; 
                await addDoc(collection(db, 'duas'), { text: text, timestamp: Date.now() });
                if(navigator.vibrate) navigator.vibrate(50);
            } catch (error) { 
                alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
                input.value = text;
            }
        }

        // 2. Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
        const sebhaDocRef = doc(db, 'stats', 'global_sebha');
        
        onSnapshot(sebhaDocRef, (docSnap) => {
            if (docSnap.exists()) {
                document.getElementById('globalSebhaCounter').innerText = docSnap.data().count.toLocaleString();
            } else {
                setDoc(sebhaDocRef, { count: 0 });
            }
        });

        let clickCount = 0;
        let timeout = null;
        window.incrementGlobalSebha = function() {
            if(navigator.vibrate) navigator.vibrate(15);
            clickCount++;
            
            const counterElement = document.getElementById('globalSebhaCounter');
            let currentVal = parseInt(counterElement.innerText.replace(/,/g, '')) || 0;
            counterElement.innerText = (currentVal + 1).toLocaleString();

            clearTimeout(timeout);
            timeout = setTimeout(async () => {
                if(clickCount > 0) {
                    const toAdd = clickCount;
                    clickCount = 0;
                    try {
                        await updateDoc(sebhaDocRef, { count: increment(toAdd) });
                    } catch (e) { console.log("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¨Ø­Ø©"); }
                }
            }, 1000);
        }
    </script>
</body>
</html>
